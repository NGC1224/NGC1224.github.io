<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><div id="myscoll"></div><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>小程序加强 | NGC1224</title><meta name="keywords" content="前端"><meta name="author" content="NGC1224"><meta name="copyright" content="NGC1224"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="微信小程序的加强使用">
<meta property="og:type" content="article">
<meta property="og:title" content="小程序加强">
<meta property="og:url" content="https://blog.ngc1224.cn/posts/5b941666.html">
<meta property="og:site_name" content="NGC1224">
<meta property="og:description" content="微信小程序的加强使用">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://source.fomal.cc/img/default_cover_14.webp">
<meta property="article:published_time" content="2024-03-15T11:36:21.674Z">
<meta property="article:modified_time" content="2024-03-15T12:13:28.981Z">
<meta property="article:author" content="NGC1224">
<meta property="article:tag" content="前端">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://source.fomal.cc/img/default_cover_14.webp"><link rel="shortcut icon" href="/"><link rel="canonical" href="https://blog.ngc1224.cn/posts/5b941666"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/6.0.0/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.staticfile.org/fancyapps-ui/4.0.31/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.js',
      css: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '小程序加强',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-03-15 20:13:28'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="https://cdn1.tianli0.top/npm/element-ui@2.15.6/packages/theme-chalk/lib/index.css"><style id="themeColor"></style><style id="rightSide"></style><style id="transPercent"></style><style id="blurNum"></style><style id="settingStyle"></style><span id="fps"></span><style id="defineBg"></style><style id="menu_shadow"></style><svg aria-hidden="true" style="position:absolute; overflow:hidden; width:0; height:0"><symbol id="icon-sun" viewBox="0 0 1024 1024"><path d="M960 512l-128 128v192h-192l-128 128-128-128H192v-192l-128-128 128-128V192h192l128-128 128 128h192v192z" fill="#FFD878" p-id="8420"></path><path d="M736 512a224 224 0 1 0-448 0 224 224 0 1 0 448 0z" fill="#FFE4A9" p-id="8421"></path><path d="M512 109.248L626.752 224H800v173.248L914.752 512 800 626.752V800h-173.248L512 914.752 397.248 800H224v-173.248L109.248 512 224 397.248V224h173.248L512 109.248M512 64l-128 128H192v192l-128 128 128 128v192h192l128 128 128-128h192v-192l128-128-128-128V192h-192l-128-128z" fill="#4D5152" p-id="8422"></path><path d="M512 320c105.888 0 192 86.112 192 192s-86.112 192-192 192-192-86.112-192-192 86.112-192 192-192m0-32a224 224 0 1 0 0 448 224 224 0 0 0 0-448z" fill="#4D5152" p-id="8423"></path></symbol><symbol id="icon-moon" viewBox="0 0 1024 1024"><path d="M611.370667 167.082667a445.013333 445.013333 0 0 1-38.4 161.834666 477.824 477.824 0 0 1-244.736 244.394667 445.141333 445.141333 0 0 1-161.109334 38.058667 85.077333 85.077333 0 0 0-65.066666 135.722666A462.08 462.08 0 1 0 747.093333 102.058667a85.077333 85.077333 0 0 0-135.722666 65.024z" fill="#FFB531" p-id="11345"></path><path d="M329.728 274.133333l35.157333-35.157333a21.333333 21.333333 0 1 0-30.165333-30.165333l-35.157333 35.157333-35.114667-35.157333a21.333333 21.333333 0 0 0-30.165333 30.165333l35.114666 35.157333-35.114666 35.157334a21.333333 21.333333 0 1 0 30.165333 30.165333l35.114667-35.157333 35.157333 35.157333a21.333333 21.333333 0 1 0 30.165333-30.165333z" fill="#030835" p-id="11346"></path></symbol></svg><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-categories-card@1.0.0/lib/categorybar.css"><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.css" /><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="NGC1224" type="application/atom+xml">
</head><body><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><div class="loading-img"></div><div class="loading-image-dot"></div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://www.ngc1224.cn/userAvatar/NGC11690266267702168.jpg" onerror="onerror=null;src='/assets/r1.jpg'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">17</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">6</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-home"></use></svg><span class="menu_word" style="font-size:17px"> 首页</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--article"></use></svg><span class="menu_word" style="font-size:17px"> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-guidang1">                   </use></svg><span class="menu_word" style="font-size:17px"> 归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-sekuaibiaoqian">                   </use></svg><span class="menu_word" style="font-size:17px"> 标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-fenlei">                   </use></svg><span class="menu_word" style="font-size:17px"> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-pinweishenghuo"></use></svg><span class="menu_word" style="font-size:17px"> 休闲</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/life/music/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-yinle">                   </use></svg><span class="menu_word" style="font-size:17px"> 八音盒</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/movies/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-dianying1">                   </use></svg><span class="menu_word" style="font-size:17px"> 影院</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/games/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-youxishoubing">                   </use></svg><span class="menu_word" style="font-size:17px"> 游戏</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xiangzi"></use></svg><span class="menu_word" style="font-size:17px"> 八宝箱</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/box/gallery/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-tubiaozhizuomoban">                   </use></svg><span class="menu_word" style="font-size:17px"> 画廊</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/animation/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-nvwumao">                   </use></svg><span class="menu_word" style="font-size:17px"> 动画</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/nav/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-zhifengche">                   </use></svg><span class="menu_word" style="font-size:17px"> 网址导航</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shejiaoxinxi"></use></svg><span class="menu_word" style="font-size:17px"> 社交</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/social/fcircle/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-pengyouquan">                   </use></svg><span class="menu_word" style="font-size:17px"> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-liuyan">                   </use></svg><span class="menu_word" style="font-size:17px"> 留言板</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/social/link/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-lianjie">                   </use></svg><span class="menu_word" style="font-size:17px"> 友人帐</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-wangye"></use></svg><span class="menu_word" style="font-size:17px"> 网站</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/site/census/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--tongjibiao">                   </use></svg><span class="menu_word" style="font-size:17px"> 网站统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/echarts/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shujutongji1">                   </use></svg><span class="menu_word" style="font-size:17px"> 文章统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/time/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xianxingshalou">                   </use></svg><span class="menu_word" style="font-size:17px"> 旧时光</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-maoliang"></use></svg><span class="menu_word" style="font-size:17px"> 个人</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/personal/bb/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-qunliaotian">                   </use></svg><span class="menu_word" style="font-size:17px"> 唠叨</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/love/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-love-sign">                   </use></svg><span class="menu_word" style="font-size:17px"> 恋爱小屋</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/about/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-paperplane">                   </use></svg><span class="menu_word" style="font-size:17px"> 关于</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">NGC1224</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-home"></use></svg><span class="menu_word" style="font-size:17px"> 首页</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--article"></use></svg><span class="menu_word" style="font-size:17px"> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-guidang1">                   </use></svg><span class="menu_word" style="font-size:17px"> 归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-sekuaibiaoqian">                   </use></svg><span class="menu_word" style="font-size:17px"> 标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-fenlei">                   </use></svg><span class="menu_word" style="font-size:17px"> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-pinweishenghuo"></use></svg><span class="menu_word" style="font-size:17px"> 休闲</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/life/music/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-yinle">                   </use></svg><span class="menu_word" style="font-size:17px"> 八音盒</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/movies/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-dianying1">                   </use></svg><span class="menu_word" style="font-size:17px"> 影院</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/games/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-youxishoubing">                   </use></svg><span class="menu_word" style="font-size:17px"> 游戏</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xiangzi"></use></svg><span class="menu_word" style="font-size:17px"> 八宝箱</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/box/gallery/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-tubiaozhizuomoban">                   </use></svg><span class="menu_word" style="font-size:17px"> 画廊</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/animation/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-nvwumao">                   </use></svg><span class="menu_word" style="font-size:17px"> 动画</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/nav/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-zhifengche">                   </use></svg><span class="menu_word" style="font-size:17px"> 网址导航</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shejiaoxinxi"></use></svg><span class="menu_word" style="font-size:17px"> 社交</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/social/fcircle/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-pengyouquan">                   </use></svg><span class="menu_word" style="font-size:17px"> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-liuyan">                   </use></svg><span class="menu_word" style="font-size:17px"> 留言板</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/social/link/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-lianjie">                   </use></svg><span class="menu_word" style="font-size:17px"> 友人帐</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-wangye"></use></svg><span class="menu_word" style="font-size:17px"> 网站</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/site/census/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--tongjibiao">                   </use></svg><span class="menu_word" style="font-size:17px"> 网站统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/echarts/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shujutongji1">                   </use></svg><span class="menu_word" style="font-size:17px"> 文章统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/time/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xianxingshalou">                   </use></svg><span class="menu_word" style="font-size:17px"> 旧时光</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-maoliang"></use></svg><span class="menu_word" style="font-size:17px"> 个人</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/personal/bb/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-qunliaotian">                   </use></svg><span class="menu_word" style="font-size:17px"> 唠叨</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/love/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-love-sign">                   </use></svg><span class="menu_word" style="font-size:17px"> 恋爱小屋</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/about/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-paperplane">                   </use></svg><span class="menu_word" style="font-size:17px"> 关于</span></a></li></ul></div></div><center id="name-container"><a id="page-name" href="javascript:scrollToTop()">PAGE_NAME</a></center><div id="nav-right"><div id="search-button"><a class="search faa-parent animated-hover" title="检索站内任何你想要的信息"><svg class="faa-tada icon" style="height:24px;width:24px;fill:currentColor;position:relative;top:6px" aria-hidden="true"><use xlink:href="#icon-valentine_-search-love-find-heart"></use></svg><span> 搜索</span></a></div><a class="meihua faa-parent animated-hover" onclick="toggleWinbox()" title="美化设置-自定义你的风格" id="meihua-button"><svg class="faa-tada icon" style="height:26px;width:26px;fill:currentColor;position:relative;top:8px" aria-hidden="true"><use xlink:href="#icon-tupian1"></use></svg></a><a class="sun_moon faa-parent animated-hover" onclick="switchNightMode()" title="浅色和深色模式转换" id="nightmode-button"><svg class="faa-tada" style="height:25px;width:25px;fill:currentColor;position:relative;top:7px" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon">       </use></svg></a><div id="toggle-menu"><a><i class="fas fa-bars fa-fw"></i></a></div></div></div></nav><div id="post-info"><h1 class="post-title">小程序加强</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><svg class="meta_icon post-meta-icon" style="width:30px;height:30px;position:relative;top:10px"><use xlink:href="#icon-rili"></use></svg><span class="post-meta-label">发表于 </span><time class="post-meta-date-created" datetime="2024-03-15T11:36:21.674Z" title="发表于 2024-03-15 19:36:21">2024-03-15</time><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:18px;height:18px;position:relative;top:5px"><use xlink:href="#icon-gengxin1"></use></svg><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-03-15T12:13:28.981Z" title="更新于 2024-03-15 20:13:28">2024-03-15</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:18px;height:18px;position:relative;top:5px"><use xlink:href="#icon-biaoqian"></use></svg><a class="post-meta-categories" href="/categories/%E5%B0%8F%E7%A8%8B%E5%BA%8F/">小程序</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><svg class="meta_icon post-meta-icon" style="width:25px;height:25px;position:relative;top:8px"><use xlink:href="#icon-charuword"></use></svg><span class="post-meta-label">字数总计:</span><span class="word-count">8776</span><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:20px;height:20px;position:relative;top:5px"><use xlink:href="#icon-shizhong"></use></svg><span class="post-meta-label">阅读时长:</span><span>32分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="小程序加强"><svg class="meta_icon post-meta-icon" style="width:25px;height:25px;position:relative;top:5px"><use xlink:href="#icon-eye"></use></svg><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1>自定义组件</h1>
<h2 id="1-组件的创建与引用">1.组件的创建与引用</h2>
<h3 id="1-创建组件">1.创建组件</h3>
<p>在项目的根目录中，鼠标右键，创建 ==components -&gt; test== 文件夹<br>
在新建的 components -&gt; test 文件夹上，鼠标右键，点击“==新建 Component==”<br>
键入组件的名称之后回车，会自动生成组件对应的 4 个文件，后缀名分别为 .js，.json， .wxml 和 .wxss</p>
<p>注意：为了保证目录结构的清晰，建议把不同的组件，存放到单独目录中，例如：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://ngc1224.oss-cn-hangzhou.aliyuncs.com/TyporaImg/WeChat/image-20230401165127076.png" alt="image-20230401165127076"></p>
<h3 id="2-引用组件">2.引用组件</h3>
<p>组件的引用方式分为“==局部引用==”和“==全局引用==”，顾名思义：<br>
局部引用：组件只能在当前被引用的页面内使用<br>
全局引用：组件可以在每个小程序页面中使用</p>
<h3 id="3-局部引用组件">3.局部引用组件</h3>
<p>在页面的 .json 配置文件中引用组件的方式，叫做“局部引用”。示例代码如下：</p>
<blockquote>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">//</span>在页面的 <span class="string">.json</span> 文件中，引入组件</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;usingComponents&quot;</span>: &#123;</span><br><span class="line"> <span class="string">&quot;my-test1&quot;</span>:<span class="string">&quot;/components/test/test&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">//</span>在页面的 <span class="string">.wxml</span> 文件中，使用组件</span><br><span class="line">&lt;my-test1&gt;&lt;<span class="string">/my-test1</span>&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="4-全局引用组件">4.全局引用组件</h3>
<p>在 app.json 全局配置文件中引用组件的方式，叫做“全局引用”。示例代码如下：</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">//在 app.json 文件中，引入组件</span></span><br><span class="line">&gt;&#123;</span><br><span class="line"><span class="string">&quot;pages&quot;</span>:&#123;&#125;,</span><br><span class="line"><span class="string">&quot;window&quot;</span>:&#123;&#125;,</span><br><span class="line">   <span class="string">&quot;usingComponents&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;my-test2&quot;</span>:<span class="string">&quot;/components/test2/test2&quot;</span></span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;</span><br><span class="line"></span><br><span class="line">&gt;<span class="comment">//在页面的 .wxml 文件中，使用组件</span></span><br><span class="line">&gt;<span class="language-xml"><span class="tag">&lt;<span class="name">my-test2</span>&gt;</span><span class="tag">&lt;/<span class="name">my-test2</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="5-全局引用-VS-局部引用">5.全局引用 VS 局部引用</h3>
<p>根据组件的==使用频率==和==范围==，来选择合适的引用方式：<br>
如果某组件==在多个页面中经常被用到==，建议进行“全局引用”<br>
如果某组件只==在特定的页面中被用到==，建议进行“局部引用”</p>
<h3 id="6-组件和页面的区别">6.组件和页面的区别</h3>
<p>从表面来看，组件和页面都是由 .js、.json、.wxml 和 .wxss 这四个文件组成的。但是，组件和页面的 .js 与 .json文件有明显的不同：<br>
组件的 .json 文件中需要声明 ==“component”: true== 属性<br>
组件的 .js 文件中调用的是 ==Component()== 函数<br>
组件的事件处理函数需要定义到 ==methods== 节点中</p>
<h2 id="2-样式">2.样式</h2>
<h3 id="1-组件样式隔离">1.组件样式隔离</h3>
<p>默认情况下，自定义组件的样式只对当前组件生效，不会影响到组件之外的 UI 结构，如图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://ngc1224.oss-cn-hangzhou.aliyuncs.com/TyporaImg/WeChat/image-20230401180602648.png" alt="image-20230401180602648"></p>
<p>组件 A 的样式==不会影响==组件 C 的样式<br>
组件 A 的样式==不会影响==小程序页面的样式<br>
小程序页面的样式==不会影响==组件 A 和 C 的样式</p>
<p>好处：</p>
<ol>
<li>防止外界的样式影响组件内部的样式</li>
<li>防止组件的样式破坏外界的样式</li>
</ol>
<h3 id="2-组件样式隔离的注意点">2.组件样式隔离的注意点</h3>
<p>app.wxss 中的全局样式对组件无效<br>
只有 class 选择器会有样式隔离效果，id 选择器、属性选择器、标签选择器不受样式隔离的影响</p>
<p>建议：在==组件==和==引用组件的页面==中建议使用 class 选择器，==不要使用 id、属性、标签选择器==！</p>
<h3 id="3-修改组件的样式隔离选项">3.修改组件的样式隔离选项</h3>
<p>默认情况下，自定义组件的==样式隔离特性==能够==防止组件内外样式互相干扰的问题==。但有时，我们希望在外界能够控制组件内部的样式，此时，可以通过 ==styleIsolation== 修改组件的样式隔离选项，用法如下：</p>
<blockquote>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">//在组件的 .js 文件中新增如下配置</span></span><br><span class="line">&gt;Component(<span class="punctuation">&#123;</span></span><br><span class="line"><span class="symbol">options:</span><span class="punctuation">&#123;</span></span><br><span class="line"><span class="symbol"> styleIsolation:</span><span class="string">&quot;isolated&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line">&gt;<span class="punctuation">&#125;</span>)</span><br><span class="line"></span><br><span class="line">&gt;<span class="comment">//或在组件的 .json 文件中新增如下配置</span></span><br><span class="line">&gt;<span class="punctuation">&#123;</span></span><br><span class="line"><span class="symbol">styleIsolation:</span><span class="string">&quot;isolated&quot;</span></span><br><span class="line">&gt;<span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="4-styleIsolation-的可选值">4.styleIsolation 的可选值</h3>
<table>
<thead>
<tr>
<th>可选值</th>
<th>默认值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>isolated</td>
<td>是</td>
<td>表示启用样式隔离，在自定义组件内外，使用 class 指定的样式将不会相互影响</td>
</tr>
<tr>
<td>apply-hared</td>
<td>否</td>
<td>表示页面 wxss  样式将影响到自定义组件，但自定义组件  wxss  中指定的样式不会影响页面</td>
</tr>
<tr>
<td>shared</td>
<td>否</td>
<td>表示页面 wxss 样式将影响到自定义组件，自定义组件 wxss 中指定的样式也会影响页面和其他设置了 apply-shared 或 shared 的自定义组件</td>
</tr>
</tbody>
</table>
<h2 id="3-数据、方法和属性">3.数据、方法和属性</h2>
<h3 id="1-data-数据">1.data 数据</h3>
<p>在小程序组件中，==用于组件模板渲染的==私有数据，需要定义到 ==data 节点==中，示例如下：</p>
<blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;Component(&#123;</span><br><span class="line">&gt;<span class="comment">/*</span></span><br><span class="line"><span class="comment">* 组件的初始化数据</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">data:&#123;</span><br><span class="line"> count:<span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line">&gt;&#125;)</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="2-methods-方法">2.methods 方法</h3>
<p>在小程序组件中，==事件处理函数==和==自定义方法==需要定义到 ==methods 节点==中，示例代码如下：</p>
<blockquote>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="built_in">Component</span>(&#123;</span><br><span class="line">methods:&#123;<span class="comment">//组件的方法列表【包含事件的处理函数和自定义方法】</span></span><br><span class="line"> <span class="built_in">addCount</span>()&#123;<span class="comment">//事件处理函数</span></span><br><span class="line">  this<span class="selector-class">.setData</span>(&#123;count:this<span class="selector-class">.data</span><span class="selector-class">.count</span> + <span class="number">1</span>&#125;)</span><br><span class="line">  this.<span class="built_in">_showCount</span>()<span class="comment">//通过 this 直接调用自定义方法</span></span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="built_in">_showCount</span>()&#123;<span class="comment">//自定义方法建议以 _ 开头</span></span><br><span class="line">  wx<span class="selector-class">.showToast</span>(&#123;</span><br><span class="line">   title:<span class="string">&quot;count值为：&quot;</span> + this<span class="selector-class">.data</span><span class="selector-class">.count</span>,</span><br><span class="line">   <span class="attribute">icon</span>:<span class="string">&quot;none&quot;</span></span><br><span class="line">  &#125;)</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">&gt;&#125;)</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="3-properties-属性">3.properties 属性</h3>
<p>在小程序组件中，properties 是组件的对外属性，==用来接收外界传递到组件中的数据==，示例代码如下：</p>
<blockquote>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt;Component(<span class="punctuation">&#123;</span></span><br><span class="line"><span class="comment">//属性定义</span></span><br><span class="line"><span class="symbol">properties:</span><span class="punctuation">&#123;</span></span><br><span class="line"><span class="symbol"> max:</span><span class="punctuation">&#123;</span><span class="comment">//完整定义属性的方式【当需要指定属性默认值时，建议使用此方法】</span></span><br><span class="line"><span class="symbol">  type:</span> Number,<span class="comment">//属性值的数据类型</span></span><br><span class="line"><span class="symbol">  value:</span> <span class="number">10</span><span class="comment">//属性默认值</span></span><br><span class="line"> <span class="punctuation">&#125;</span>,</span><br><span class="line"><span class="symbol"> max:</span>Number<span class="comment">//简化定义属性的方式【不需指定属性默认值，可以使用简化方式】</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line">&gt;<span class="punctuation">&#125;</span>)</span><br><span class="line"></span><br><span class="line">&gt;<span class="params">&lt;my-test1 max=&quot;<span class="number">10</span>&quot;&gt;</span><span class="params">&lt;/my-test1&gt;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="4-data-和-properties-的区别">4.data 和 properties 的区别</h3>
<p>在小程序的组件中，properties 属性和 data 数据的用法相同，它们都是==可读可写==的，只不过：</p>
<ul>
<li>data 更倾向于==存储组件的私有数据==</li>
<li>properties 更倾向于==存储外界传递到组件中的数据==</li>
</ul>
<blockquote>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt;Component(&#123;</span><br><span class="line">methods:&#123;</span><br><span class="line"> showInfo()&#123;</span><br><span class="line">  console.log(<span class="keyword">this</span>.<span class="keyword">data</span>)<span class="comment">//输出结果：&#123;count: 0, max: 10&#125;</span></span><br><span class="line">  console.log(<span class="keyword">this</span>.properties)<span class="comment">//输出结果：&#123;count: 0, max: 10&#125;</span></span><br><span class="line">  <span class="comment">//结果为true，证明 data 和 properties 属性【在本质上是一致的、都是可读可写的】</span></span><br><span class="line">  console.log(<span class="keyword">this</span>.<span class="keyword">data</span> === <span class="keyword">this</span>.properties)</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">&gt;&#125;)</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="5-使用-setData-修改-properties-的值">5.使用 setData 修改 properties 的值</h3>
<p>由于 ==data 数据==和 ==properties 属性==在本质上没有任何区别，因此 properties 属性的值也可以用于页面渲染，或使用 setData 为 properties 中的属性重新赋值，示例代码如下：</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">//在组件的 .wxml 文件中使用 properties 属性的值</span></span><br><span class="line">&gt;<span class="language-xml"><span class="tag">&lt;<span class="name">view</span>&gt;</span>max属性的值为：&#123;&#123;max&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&gt;<span class="title class_">Component</span>(&#123;</span><br><span class="line"><span class="attr">properties</span>:&#123;<span class="attr">max</span>: <span class="title class_">Number</span>&#125;,<span class="comment">//定义属性</span></span><br><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line"> <span class="title function_">addCount</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;<span class="attr">max</span>: <span class="variable language_">this</span>.<span class="property">properties</span>.<span class="property">max</span> + <span class="number">1</span>&#125;)<span class="comment">//使用setData修改属性的值</span></span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">&gt;&#125;)</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="4-数据监听">4.数据监听</h2>
<h3 id="1-什么是数据监听">1.什么是数据监听</h3>
<p>数据监听器用于==监听和响应任何属性和数据字段的变化，从而执行特定的操作==。它的作用类似于 vue 中的 watch 侦听器。在小程序组件中，数据监听器的基本语法格式如下：</p>
<blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;Component(&#123;</span><br><span class="line">observers:&#123;</span><br><span class="line"> &quot;字段<span class="selector-tag">A</span>,字段<span class="selector-tag">B</span>&quot;:<span class="built_in">function</span>(字段A的新值，字段B的新值)&#123;</span><br><span class="line">  //do something</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">&gt;&#125;)</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="2-数据监听器的基本用法">2.数据监听器的基本用法</h3>
<p>组件的 UI 结构如下：</p>
<blockquote>
<figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">&gt;//组件的 UI 结构</span></span><br><span class="line"><span class="language-xml">&gt;<span class="tag">&lt;<span class="name">view</span>&gt;</span></span><span class="template-variable">&#123;&#123;<span class="name">n1</span>&#125;&#125;</span><span class="language-xml"> + </span><span class="template-variable">&#123;&#123;<span class="name">n2</span>&#125;&#125;</span><span class="language-xml"> = </span><span class="template-variable">&#123;&#123;<span class="name">sum</span>&#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">&gt;<span class="tag">&lt;<span class="name">buntton</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;addN1&quot;</span>&gt;</span>n1自增<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">&gt;<span class="tag">&lt;<span class="name">buntton</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;addN2&quot;</span>&gt;</span>n2自增<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
</blockquote>
<p>组件的 .js 文件代码如下：</p>
<blockquote>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt;Component(&#123;</span><br><span class="line"><span class="keyword">data</span>:&#123;n1: <span class="number">0</span>,n2: <span class="number">0</span>&#125;,<span class="comment">//数据节点</span></span><br><span class="line">methods:&#123;<span class="comment">//方法列表</span></span><br><span class="line"> addN1()&#123;<span class="keyword">this</span>.setData(&#123;n1: <span class="keyword">this</span>.<span class="keyword">data</span>.n1 + <span class="number">1</span>&#125;)&#125;,</span><br><span class="line"> addN2()&#123;<span class="keyword">this</span>.setData(&#123;n2: <span class="keyword">this</span>.<span class="keyword">data</span>.n2 + <span class="number">1</span>&#125;)&#125;</span><br><span class="line">&#125;,</span><br><span class="line">obeserver:&#123;<span class="comment">//数据监听节点</span></span><br><span class="line"> <span class="string">&quot;n1,n2&quot;</span>:function(n1,n2)&#123;<span class="comment">//监听 n1 和 n2 数据的变化</span></span><br><span class="line">  <span class="keyword">this</span>.setData(&#123;sum: n1 + n2&#125;)<span class="comment">//通过监听器，自动计算 sum 的值</span></span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">&gt;&#125;)</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="3-监听对象属性的变化">3.监听对象属性的变化</h3>
<p>数据监听器支持监听对象中==单个==或==多个属性==的变化，示例语法如下：</p>
<blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt;Component(&#123;</span><br><span class="line">observers:&#123;</span><br><span class="line"> &quot;对象.属性<span class="selector-tag">A</span>,对象.属性<span class="selector-tag">B</span>&quot;:<span class="built_in">function</span>(属性A的新值,属性B的新值)&#123;</span><br><span class="line">  //触发此监听器的 <span class="number">3</span> 种情况</span><br><span class="line">  //【为属性<span class="selector-tag">A</span>赋值】使用 setData 设置 this<span class="selector-class">.data</span>.对象.属性 <span class="selector-tag">A</span> 时触发</span><br><span class="line">  //【为属性<span class="selector-tag">B</span>赋值】使用 setData 设置 this<span class="selector-class">.data</span>.对象.属性 <span class="selector-tag">B</span> 时触发</span><br><span class="line">  //【直接为对象赋值】使用 setData 设置 this<span class="selector-class">.data</span>.对象 时触发</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">&gt;&#125;)</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="4-监听对象中指定属性的变化">4.监听对象中指定属性的变化</h3>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="attr">observers</span>:&#123;</span><br><span class="line"><span class="comment">//监听对象子属性的变化</span></span><br><span class="line"><span class="string">&quot;对象.属性,对象.属性,对象.属性&quot;</span>: <span class="keyword">function</span>(<span class="params">新值<span class="number">1</span>,新值<span class="number">2</span>,新值<span class="number">3</span></span>)&#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line"> <span class="comment">//为 data 中重新赋值</span></span><br><span class="line"> 属性:<span class="string">`<span class="subst">$&#123;新值<span class="number">1</span>&#125;</span>,<span class="subst">$&#123;新值<span class="number">2</span>&#125;</span>,<span class="subst">$&#123;新值<span class="number">3</span>&#125;</span>`</span></span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="5-监听对象中所有属性的变化">5.监听对象中所有属性的变化</h3>
<p>如果某个对象中需要被监听的属性太多，为了方便，可以使用==通配符 **== 来==监听==对象中==所有属性的变化==，示例代码如下：</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="attr">observers</span>:&#123;</span><br><span class="line"><span class="comment">//使用通配符 ** 监听对象上所有属性的变化</span></span><br><span class="line"><span class="string">&quot;对象.**&quot;</span>:<span class="keyword">function</span>(<span class="params">obj</span>)&#123;</span><br><span class="line"> <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">  属性:<span class="string">`<span class="subst">$&#123;obj.r&#125;</span>,<span class="subst">$&#123;obj.g&#125;</span>,<span class="subst">$&#123;obj.b&#125;</span>`</span></span><br><span class="line"> &#125;)</span><br><span class="line">&#125;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="5-纯数据字段">5.纯数据字段</h2>
<h3 id="1-什么是纯数据字段">1.什么是纯数据字段</h3>
<p>概念：==纯数据字段==指的是那些==不用于界面渲染的 data 字段==。</p>
<p>应用场景：例如有些情况下，某些 data 中的字段==既不会展示在界面上==，==也不会传递给其他组件==，仅仅在当前组件内部使用。带有这种特性的 data 字段适合被设置为纯数据字段。</p>
<p>好处：纯数据字段==有助于提升页面更新的性能==。</p>
<h3 id="2-使用规则">2.使用规则</h3>
<p>在 Component 构造器的 options 节点中，指定 ==pureDataPattern== 为一个==正则表达式==，字段名符合这个正则表达式的字段将成为纯数据字段，示例代码如下：</p>
<blockquote>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt;Component(<span class="punctuation">&#123;</span></span><br><span class="line"><span class="symbol">options:</span><span class="punctuation">&#123;</span></span><br><span class="line"> <span class="comment">//指定所有 _ 开头的数据字段为纯数据字段</span></span><br><span class="line"><span class="symbol"> pureDataPattern:</span>/^_/</span><br><span class="line"><span class="punctuation">&#125;</span>,</span><br><span class="line"><span class="symbol">data:</span><span class="punctuation">&#123;</span></span><br><span class="line"><span class="symbol"> a:</span>true,<span class="comment">//普通字段</span></span><br><span class="line"><span class="symbol"> _b:</span>true<span class="comment">//纯数据字段</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line">&gt;<span class="punctuation">&#125;</span>)</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="6-组件的生命周期">6.组件的生命周期</h2>
<h3 id="1-组件全部的生命周期函数">1.组件全部的生命周期函数</h3>
<p>小程序组件可用的全部生命周期如下表所示：</p>
<table>
<thead>
<tr>
<th>生命周期函数</th>
<th>参数</th>
<th>描述说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>created</td>
<td>无</td>
<td>在组件实例刚刚被创建时执行</td>
</tr>
<tr>
<td>attached</td>
<td>无</td>
<td>在组件实例进入页面节点树时执行</td>
</tr>
<tr>
<td>ready</td>
<td>无</td>
<td>在组件在视图层布局完成后执行</td>
</tr>
<tr>
<td>moved</td>
<td>无</td>
<td>在组件实例被移动到节点树另一个位置时执行</td>
</tr>
<tr>
<td>detached</td>
<td>无</td>
<td>在组件实例被从页面节点树移除时执行</td>
</tr>
<tr>
<td>error</td>
<td>Object Error</td>
<td>每当组件方法抛出错误时执行</td>
</tr>
</tbody>
</table>
<h3 id="2-组件主要的生命周期函数">2.组件主要的生命周期函数</h3>
<p>在小程序组件中，最重要的生命周期函数有 3 个，分别是 ==created、attached、detached==。它们各自的特点如下：</p>
<ol>
<li>组件实例==刚被创建好==的时候，created 生命周期函数会被触发</li>
</ol>
<ul>
<li>此时还不能调用 setData</li>
<li>通常在这个生命周期函数中，只应该用于给组件的 this 添加一些自定义的属性字段</li>
</ul>
<ol start="2">
<li>在组件==完全初始化完毕、进入页面节点树后==， attached 生命周期函数会被触发</li>
</ol>
<ul>
<li>此时， this.data 已被初始化完毕</li>
<li>这个生命周期很有用，绝大多数初始化的工作可以在这个时机进行（例如发请求获取初始数据）</li>
</ul>
<ol start="3">
<li>在组件==离开页面节点树后==， detached 生命周期函数会被触发</li>
</ol>
<ul>
<li>退出一个页面时，会触发页面内每个自定义组件的 detached 生命周期函数</li>
<li>此时适合做一些清理性质的工作</li>
</ul>
<h3 id="3-lifetimes-节点">3.lifetimes 节点</h3>
<p>在小程序组件中，生命周期函数可以直接定义在 Component 构造器的第一级参数中，可以在 ==lifetimes== 字段内进行声明==（这是推荐的方式，其优先级最高）==。示例代码如下：</p>
<blockquote>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="built_in">Component</span>(&#123;</span><br><span class="line"><span class="comment">//推荐用法</span></span><br><span class="line">lifetimes:&#123;</span><br><span class="line"> <span class="built_in">attached</span>()&#123;&#125;,<span class="comment">//在组件实例进入页面节点树时执行</span></span><br><span class="line"> <span class="built_in">detached</span>()&#123;&#125;,<span class="comment">//在组件实例被从页面节点树移除时执行</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//旧定义方式</span></span><br><span class="line"><span class="function"><span class="title">attached</span><span class="params">()</span></span>&#123;&#125;,<span class="comment">//在组件实例进入页面节点树时执行</span></span><br><span class="line"><span class="function"><span class="title">detached</span><span class="params">()</span></span>&#123;&#125;,<span class="comment">//在组件实例被从页面节点树移除时执行</span></span><br><span class="line">&gt;&#125;)</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="7-组件所在页面的生命周期">7.组件所在页面的生命周期</h2>
<h3 id="1-什么是组件所在页面的生命周期">1.什么是组件所在页面的生命周期</h3>
<p>有时，==自定义组件的行为依赖于页面状态的变化==，此时就需要用到==组件所在页面的生命周期==。<br>
例如：每当触发页面的 show 生命周期函数的时候，我们希望能够重新生成一个随机的 RGB 颜色值。<br>
在自定义组件中，组件所在页面的生命周期函数有如下 3 个，分别是：</p>
<table>
<thead>
<tr>
<th><strong>生命周期函数</strong></th>
<th><strong>参数</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>show</td>
<td>无</td>
<td>组件所在的页面被展示时执行</td>
</tr>
<tr>
<td>hide</td>
<td>无</td>
<td>组件所在的页面被隐藏时执行</td>
</tr>
<tr>
<td>resize</td>
<td>Object Size</td>
<td>组件所在的页面尺寸变化时执行</td>
</tr>
</tbody>
</table>
<h3 id="2-pageLifetimes-节点">2.pageLifetimes 节点</h3>
<p>组件所在页面的生命周期函数，需要定义在 pageLifetimes 节点中，示例代码如下：</p>
<blockquote>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;Component(&#123;</span><br><span class="line"><span class="attr">pageLifetimes</span>:&#123;</span><br><span class="line"> <span class="attr">show</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;,<span class="comment">//页面被展示</span></span><br><span class="line"> hide:<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;,<span class="comment">//页面被隐藏</span></span><br><span class="line"> <span class="built_in">resize</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;<span class="comment">//页面尺寸变化</span></span><br><span class="line">&#125;</span><br><span class="line">&gt;&#125;)</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="8-插槽">8.插槽</h2>
<h3 id="1-什么是插槽">1.什么是插槽</h3>
<p>在自定义组件的 wxml 结构中，可以提供一个 ==<slot>== 节点（插槽），用于承载组件使用者提供的 wxml 结构。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://ngc1224.oss-cn-hangzhou.aliyuncs.com/TyporaImg/WeChat/image-20230402123008216.png" alt="image-20230402123008216"></p>
<h3 id="2-单个插槽">2.单个插槽</h3>
<p>在小程序中，默认每个自定义组件中只允许使用一个 <slot> 进行占位，这种个数上的限制叫做单个插槽。</p>
<blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">&lt;!-- 组件的封装者 --&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;wrapper&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>这是组件的内容节点<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- 对于不确定的内容，可以使用&lt;slot&gt;进行占位，具体的内容由组件的使用者决定 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&gt;<span class="comment">&lt;!-- 组件的使用者 --&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">component-tag-name</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 这部分内容将被放置在组件 &lt;slot&gt; 的位置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>这里是插入到组件slot中的内容<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;/<span class="name">component-tag-name</span>&gt;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="3-启用多个插槽">3.启用多个插槽</h3>
<p>在小程序的自定义组件中，需要使用多 <slot> 插槽时，可以在组件的 .js 文件中，通过如下方式进行启用。<br>
示例代码如下：</p>
<blockquote>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;Component(<span class="punctuation">&#123;</span></span><br><span class="line"><span class="symbol">options:</span><span class="punctuation">&#123;</span></span><br><span class="line"><span class="symbol"> multipleSlots:</span> true<span class="comment">//在组件定义时的选项中启用多个 slot 支持</span></span><br><span class="line"><span class="punctuation">&#125;</span>,</span><br><span class="line">&gt;<span class="punctuation">&#125;</span>)</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="4-定义多个插槽">4.定义多个插槽</h3>
<p>可以在组件的 .wxml 中使用多个 <slot> 标签，以不同的 ==name== 来区分不同的插槽。示例代码如下：</p>
<blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">&lt;!-- 组件模板 --&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;wrapper&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- name 为 before 的第一个 slot 插槽 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;before&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>这是一段固定的文本内容<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- name 为 adter 的第二个 slot 插槽 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;after&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<p>在使用==带有多个插槽的自定义组件==时，需要用 ==slot 属性==来将节点插入到不同的 <slot> 中。示例代码如下：</p>
<blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">&lt;!-- 引用组件的页面模板 --&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">component-tag-name</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 这部分内容将被放置在组件&lt;slot name=&quot;before&quot;&gt;的位置上 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">slot</span>=<span class="string">&quot;before&quot;</span>&gt;</span>这是插入到组件slot name=&quot;before&quot;中的内容<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- 这部分内容将被放置在组件&lt;slot name=&quot;after&quot;&gt;的位置上 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">slot</span>=<span class="string">&quot;after&quot;</span>&gt;</span>这是插入到组件slot name=&quot;after&quot;中的内容<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;/<span class="name">component-tag-name</span>&gt;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="9-父子组件之间的通信">9.父子组件之间的通信</h2>
<h3 id="1-父子组件之间通信的-3-种方式">1.父子组件之间通信的 3 种方式</h3>
<ol>
<li>属性绑定</li>
</ol>
<ul>
<li>用于父组件向子组件的指定属性设置数据，仅能设置 JSON 兼容的数据</li>
</ul>
<ol start="2">
<li>事件绑定</li>
</ol>
<ul>
<li>用于子组件向父组件传递数据，可以传递任意数据</li>
</ul>
<ol start="3">
<li>获取组件实例</li>
</ol>
<ul>
<li>父组件还可以通过 this.selectComponent() 获取子组件实例对象</li>
<li>这样就可以直接访问子组件的任意数据和方法</li>
</ul>
<h3 id="2-属性绑定">2.属性绑定</h3>
<p>==属性绑定==用于实现==父向子传值==，而且==只能传递普通类型的数据==，无法将方法传递给子组件。父组件的示例代码如下：</p>
<blockquote>
<figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">&gt;//父组件的 data 节点</span></span><br><span class="line"><span class="language-xml">&gt;data:&#123;</span></span><br><span class="line"><span class="language-xml">count: 0</span></span><br><span class="line"><span class="language-xml">&gt;&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">&gt;//父组件的 wxml 结构</span></span><br><span class="line"><span class="language-xml">&gt;<span class="tag">&lt;<span class="name">my-test3</span> <span class="attr">count</span>=<span class="string">&quot;</span></span></span><span class="template-variable">&#123;&#123;<span class="name">count</span>&#125;&#125;</span><span class="language-xml"><span class="tag"><span class="string">&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-test3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">&gt;<span class="tag">&lt;<span class="name">view</span>&gt;</span>----------<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">&gt;<span class="tag">&lt;<span class="name">view</span>&gt;</span>父组件中，count值为:</span><span class="template-variable">&#123;&#123;<span class="name">count</span>&#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
</blockquote>
<p>子组件在 ==properties== 节点中==声明对应的属性并使用==。示例代码如下：</p>
<blockquote>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">//子组件的 properties 节点</span></span><br><span class="line">&gt;properties:&#123;</span><br><span class="line"><span class="attr">count</span>:<span class="built_in">Number</span></span><br><span class="line">&gt;&#125;</span><br><span class="line"></span><br><span class="line">&gt;<span class="comment">//子组件的 wxml 结构</span></span><br><span class="line">&gt;&lt;<span class="built_in">text</span>&gt;子组件中，<span class="built_in">count</span>值为：&#123;&#123;<span class="built_in">count</span>&#125;&#125;&lt;/<span class="built_in">text</span>&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="3-事件绑定">3.事件绑定</h3>
<p>==事件绑定==用于实现==子向父传值==，可以传递任何类型的数据。使用步骤如下：</p>
<ol>
<li>在==父组件==的 js 中，定义一个函数，这个函数==即将==通过自定义事件的形式，传递给子组件</li>
<li>在==父组件==的 wxml 中，通过自定义事件的形式，将步骤 1 中定义的函数引用，传递给子组件</li>
<li>在==子组件==的 js 中，通过调用 ==this.triggerEvent(‘自定义事件名称’, { /<em>参数对象</em>/ })== ，将数据发送到父组件</li>
<li>在==父组件==的 js 中，通过 ==e.detail== 获取到子组件传递过来的数据</li>
</ol>
<p>步骤1：在==父组件==的 js 中，定义一个函数，这个函数即将通过自定义事件的形式，传递给子组件。</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">//在父组件中定义 syncCount 方法</span></span><br><span class="line">&gt;<span class="comment">//将来，这个方法会被传递给子组件，供子组件进行调用</span></span><br><span class="line">&gt;<span class="title function_">syncCount</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;syncCount&quot;</span>)</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>步骤2：在==父组件==的 wxml 中，通过==自定义事件==的形式，将步骤 1 中定义的函数引用，传递给子组件。</p>
<blockquote>
<figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">&gt;<span class="comment">&lt;!-- 使用bind:自定义事件名称（推荐：结构清晰） --&gt;</span></span></span><br><span class="line"><span class="language-xml">&gt;<span class="tag">&lt;<span class="name">my-test3</span> <span class="attr">count</span>=<span class="string">&quot;</span></span></span><span class="template-variable">&#123;&#123;<span class="name">count</span>&#125;&#125;</span><span class="language-xml"><span class="tag"><span class="string">&quot;</span> <span class="attr">bind:sync</span>=<span class="string">&quot;syncCount&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-test3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">&gt;<span class="comment">&lt;!-- 或在 bind 后面直接写上自定义事件名称 --&gt;</span></span></span><br><span class="line"><span class="language-xml">&gt;<span class="tag">&lt;<span class="name">my-test3</span> <span class="attr">count</span>=<span class="string">&quot;</span></span></span><span class="template-variable">&#123;&#123;<span class="name">count</span>&#125;&#125;</span><span class="language-xml"><span class="tag"><span class="string">&quot;</span> <span class="attr">bindsync</span>=<span class="string">&quot;syncCount&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-test3</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
</blockquote>
<p>步骤3：在==子组件==的 js 中，通过调用 ==this.triggerEvent(‘自定义事件名称’, { /<em>参数对象</em>/ })== ，将数据发送到父组件。</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">//子组件的 wxml 结构</span></span><br><span class="line">&gt;<span class="language-xml"><span class="tag">&lt;<span class="name">text</span>&gt;</span>子组件中，count值为：&#123;&#123;count&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></span><br><span class="line">&gt;<span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;addCount&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&gt;<span class="comment">//子组件的 js 代码</span></span><br><span class="line">&gt;<span class="attr">methods</span>:&#123;</span><br><span class="line"><span class="title function_">addCount</span>(<span class="params"></span>)&#123;</span><br><span class="line"> <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">  <span class="attr">count</span>:<span class="variable language_">this</span>.<span class="property">properties</span>.<span class="property">count</span> + <span class="number">1</span></span><br><span class="line"> &#125;)</span><br><span class="line"> <span class="variable language_">this</span>.<span class="title function_">triggerEvent</span>(<span class="string">&quot;sync&quot;</span>,&#123;<span class="attr">value</span>:<span class="variable language_">this</span>.<span class="property">properties</span>.<span class="property">count</span>&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>步骤4：在==父组件==的 js 中，通过 ==e.detail== 获取到子组件传递过来的数据。</p>
<blockquote>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="built_in">syncCount</span>(e)&#123;</span><br><span class="line">this<span class="selector-class">.setData</span>(&#123;</span><br><span class="line"> count:e<span class="selector-class">.detail</span><span class="selector-class">.value</span></span><br><span class="line">&#125;)</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="4-获取组件实例">4.获取组件实例</h3>
<p>可在父组件里调用 ==this.selectComponent(“id或class选择器”)== ，获取子组件的实例对象，从而直接访问子组件的任意数据和方法。调用时需要传入一个==选择器==，例如 this.selectComponent(“.my-component”)。</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">//wxml 结构</span></span><br><span class="line">&gt;<span class="language-xml"><span class="tag">&lt;<span class="name">my-test5</span> <span class="attr">count</span>=<span class="string">&quot;&#123;&#123;count&#125;&#125;&quot;</span> <span class="attr">bind:sync</span>=<span class="string">&quot;syncCount&quot;</span> <span class="attr">class</span>=<span class="string">&quot;customA&quot;</span> <span class="attr">id</span>=<span class="string">&quot;cA&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-test5</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&gt;<span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;getChild&quot;</span>&gt;</span>获取子组件的实例对象<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&gt;<span class="title function_">getChild</span>(<span class="params"></span>)&#123;<span class="comment">//按钮的 tap 事件处理函数</span></span><br><span class="line"><span class="comment">//切记下面参数不能传递标签选择器&quot;my-test3&quot;，不然返回的是 null</span></span><br><span class="line"><span class="keyword">const</span> child = <span class="variable language_">this</span>.<span class="title function_">selectComponent</span>(<span class="string">&quot;.customA&quot;</span>)<span class="comment">//也可以传递 id 选择器 #cA</span></span><br><span class="line">child.<span class="title function_">setData</span>(&#123;<span class="comment">//调用子组件的的 setData 方法</span></span><br><span class="line"> <span class="attr">count</span>:child.<span class="property">properties</span>.<span class="property">count</span> + <span class="number">1</span></span><br><span class="line">&#125;)</span><br><span class="line">child.<span class="title function_">addCount</span>()<span class="comment">//调用子组件的 addCount 方法</span></span><br><span class="line">&gt;&#125;,</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="10-behaviors">10.behaviors</h2>
<h3 id="1-什么是-behaviors">1.什么是 behaviors</h3>
<p>behaviors 是小程序中，==用于实现组件间代码共享==的特性，类似于 Vue.js 中的 “mixins”。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://ngc1224.oss-cn-hangzhou.aliyuncs.com/TyporaImg/WeChat/image-20230402131520301.png" alt="image-20230402131520301"></p>
<h3 id="2-behaviors-的工作方式">2.behaviors 的工作方式</h3>
<p>每个 behavior 可以包含一组==属性、数据、生命周期函数和方法==。组件引用它时，它的属性、数据和方法==会被合并到组件中==。<br>
每个组件可以引用多个 behavior，behavior 也可以引用其它 behavior。</p>
<h3 id="3-创建-behavior">3.创建 behavior</h3>
<p>调用 ==Behavior(Object object)== 方法即可创建一个==共享的 behavior 实例对象==，供所有的组件使用：</p>
<blockquote>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">//调用 Behavior() 方法，创建实例对象</span></span><br><span class="line">&gt;<span class="comment">//并使用 module.exports 将 behavior 实例对象共享出去</span></span><br><span class="line">&gt;module.<span class="attr">exports</span> <span class="operator">=</span> Behavior(<span class="punctuation">&#123;</span></span><br><span class="line"><span class="comment">//属性节点</span></span><br><span class="line"><span class="symbol">properties:</span><span class="punctuation">&#123;</span><span class="punctuation">&#125;</span>,</span><br><span class="line"><span class="comment">//私有数据节点</span></span><br><span class="line"><span class="symbol">data:</span><span class="punctuation">&#123;</span>username:<span class="string">&quot;zhangsan&quot;</span><span class="punctuation">&#125;</span></span><br><span class="line"><span class="comment">//事件处理函数和自定义方法节点</span></span><br><span class="line"><span class="symbol">methods:</span><span class="punctuation">&#123;</span><span class="punctuation">&#125;</span></span><br><span class="line">&gt;<span class="punctuation">&#125;</span>)</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="4-导入并使用-behavior">4.导入并使用 behavior</h3>
<p>在组件中，使用 ==require()== 方法导入需要的 behavior，==挂载后即可访问 behavior 中的数据或方法==，示例代码如下：</p>
<blockquote>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">//1.使用require()导入需要的自定义behavior模块</span></span><br><span class="line">&gt;const myBehavior = <span class="built_in">require</span>(<span class="string">&quot;../../behaviors/my-behavios&quot;</span>)</span><br><span class="line">&gt;<span class="built_in">Component</span>(&#123;</span><br><span class="line"><span class="comment">//2.将导入的behavior实例对象，挂载到behaviors数组节点中，即可生效</span></span><br><span class="line">behaviors:<span class="selector-attr">[myBehavior]</span>,</span><br><span class="line">&gt;&#125;)</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="5-behavior-中所有可用的节点">5.behavior 中所有可用的节点</h3>
<table>
<thead>
<tr>
<th>可用的节点</th>
<th>类型</th>
<th>是否必填</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>properties</td>
<td>Object Map</td>
<td>否</td>
<td>同组件的属性</td>
</tr>
<tr>
<td>data</td>
<td>Object</td>
<td>否</td>
<td>同组件的数据</td>
</tr>
<tr>
<td>methods</td>
<td>Object</td>
<td>否</td>
<td>同自定义组件的方法</td>
</tr>
<tr>
<td>behaviors</td>
<td>String Array</td>
<td>否</td>
<td>引入其它的 behavior</td>
</tr>
<tr>
<td>created</td>
<td>Function</td>
<td>否</td>
<td>生命周期函数</td>
</tr>
<tr>
<td>attached</td>
<td>Function</td>
<td>否</td>
<td>生命周期函数</td>
</tr>
<tr>
<td>ready</td>
<td>Function</td>
<td>否</td>
<td>生命周期函数</td>
</tr>
<tr>
<td>moved</td>
<td>Function</td>
<td>否</td>
<td>生命周期函数</td>
</tr>
<tr>
<td>detached</td>
<td>Function</td>
<td>否</td>
<td>生命周期函数</td>
</tr>
</tbody>
</table>
<h3 id="6-同名字段的覆盖和组合规则">6.同名字段的覆盖和组合规则</h3>
<p>组件和它引用的 behavior 中==可以包含同名的字段==，此时可以参考如下 3 种同名时的处理规则：<br>
同名的数据字段 (==data==)<br>
同名的属性 (==properties==) 或方法 (==methods==)<br>
同名的==生命周期函数==</p>
<h2 id="总结">总结</h2>
<ol>
<li>能够创建并引用组件</li>
</ol>
<ul>
<li>==全局引用==、局部引用、==usingComponents==</li>
</ul>
<ol start="2">
<li>能够知道如何修改组件的样式隔离选项</li>
</ol>
<ul>
<li>options -&gt; ==styleIsolation==（ isolated, apply-shared, ==shared==）</li>
</ul>
<ol start="3">
<li>能够知道如何定义和使用数据监听器</li>
</ol>
<ul>
<li>==observers==</li>
</ul>
<ol start="4">
<li>能够知道如何定义和使用纯数据字段</li>
</ol>
<ul>
<li>options -&gt; ==pureDataPattern==</li>
</ul>
<ol start="5">
<li>能够知道实现组件父子通信有哪3种方式</li>
</ol>
<ul>
<li>属性绑定、==事件绑定==、this.selectComponent(‘id或class选择器’)</li>
</ul>
<ol start="6">
<li>能够知道如何定义和使用behaviors</li>
</ol>
<ul>
<li>调用 ==Behavior()== 构造器方法</li>
</ul>
<h1>使用npm包</h1>
<h2 id="1-小程序对-npm-的支持与限制">1.小程序对 npm 的支持与限制</h2>
<p>目前，小程序中已经支持使用 npm 安装第三方包，从而来提高小程序的开发效率。但是，在小程序中使用 npm 包有如下 3 个限制：</p>
<ol>
<li>不支持依赖于 ==Node.js== 内置库的包</li>
<li>不支持依赖于==浏览器内置对象==的包</li>
<li>不支持依赖于 ==C++ 插件==的包</li>
</ol>
<h2 id="2-Vant-Weapp">2.Vant Weapp</h2>
<h3 id="1-什么是-Vant-Weapp">1.什么是 Vant Weapp</h3>
<p>Vant Weapp 是有赞前端团队开源的一套==小程序 UI 组件库==，助力开发者快速搭建小程序应用。它所使用的是 ==MIT 开源许可协议==，对商业使用比较友好。<br>
官方文档地址 <a target="_blank" rel="noopener" href="https://youzan.github.io/vant-weapp">https://youzan.github.io/vant-weapp</a></p>
<h3 id="2-安装-Vant-组件库">2.安装 Vant 组件库</h3>
<p>在小程序项目中，安装 Vant 组件库主要分为如下 3 步：</p>
<ol>
<li>通过 npm 安装</li>
</ol>
<blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash"><span class="comment"># 通过 npm 安装</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">npm i vant-weapp -S --production</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash"><span class="comment"># 通过 yarn 安装</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">yarn add vant-weapp --production</span></span><br></pre></td></tr></table></figure>
</blockquote>
<ol start="2">
<li>构建 npm 包</li>
</ol>
<p>打开微信开发者工具，点击 ==工具 -&gt; 构建 npm==，构建完成后，即可引入组件</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://ngc1224.oss-cn-hangzhou.aliyuncs.com/TyporaImg/WeChat/image-20230404110532900.png" alt="image-20230404110532900"  />
<ol start="3">
<li>修改 app.json</li>
</ol>
<p>以 Button 组件为例，只需要在app.json或index.json中配置 Button 对应的路径即可。</p>
<p>官方参考文档：<a target="_blank" rel="noopener" href="https://vant-contrib.gitee.io/vant-weapp/0.x/#/intro">https://vant-contrib.gitee.io/vant-weapp/0.x/#/intro</a></p>
<h3 id="3-使用-Vant-组件">3.使用 Vant 组件</h3>
<p>安装完 Vant 组件库之后，可以在 ==app.json== 的 ==usingComponents== 节点中引入需要的组件，即可在 wxml 中直接使用组件。示例代码如下：</p>
<blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">// app.json</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash"><span class="string">&quot;usingComponents&quot;</span>: &#123;</span></span><br><span class="line"> &quot;van-button&quot;: &quot;@vant/weapp/button/index&quot;</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&#125;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">//页面的 .wxml 结构</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&lt;vant-button <span class="built_in">type</span>=<span class="string">&quot;primary&quot;</span>&gt;按钮&lt;/vant-button&gt;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="4-定制全局主题样式">4.定制全局主题样式</h3>
<p>Vant Weapp 使用 ==CSS 变量==来实现定制主题。 关于 CSS 变量的基本用法，参考 MDN 文档：<br>
<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/Using_CSS_custom_properties">https://developer.mozilla.org/zh-CN/docs/Web/CSS/Using_CSS_custom_properties</a></p>
<h3 id="5-定制全局主题样式">5.定制全局主题样式</h3>
<p>在 ==app.wxss== 中，写入 CSS 变量，即可对全局生效：</p>
<blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/*app.wxss*/</span></span><br><span class="line">&gt;page&#123;</span><br><span class="line"><span class="comment">/*订制警告按钮的背景颜色和边框颜色*/</span></span><br><span class="line"><span class="attr">--button-danger-background-color</span>:<span class="number">#C00000</span>;</span><br><span class="line"><span class="attr">--button-danger-border-color</span>:<span class="number">#D60000</span>;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>所有可用的==颜色变量==，请参考 Vant 官方提供的配置文件：<br>
<a target="_blank" rel="noopener" href="https://github.com/youzan/vant-weapp/blob/dev/packages/common/style/var.less">https://github.com/youzan/vant-weapp/blob/dev/packages/common/style/var.less</a></p>
<h2 id="3-API-Promise化">3.API Promise化</h2>
<h3 id="1-基于回调函数的异步-API-的缺点">1.基于回调函数的异步 API 的缺点</h3>
<p>默认情况下，小程序官方提供的==异步 API== 都是==基于回调函数==实现的，例如，网络请求的 API 需要按照如下的方式调用：</p>
<blockquote>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;wx.request(&#123;</span><br><span class="line">method:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">url:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">data:&#123;&#125;,</span><br><span class="line">success:<span class="function"><span class="params">()</span>=&gt;</span>&#123;&#125;,<span class="regexp">//</span>请求成功的回调函数</span><br><span class="line">fail:<span class="function"><span class="params">()</span>=&gt;</span>&#123;&#125;,<span class="regexp">//</span>请求失败的回调函数</span><br><span class="line">complete:<span class="function"><span class="params">()</span>=&gt;</span>&#123;&#125;</span><br><span class="line">&gt;&#125;)</span><br></pre></td></tr></table></figure>
</blockquote>
<p>缺点：容易造成==回调地狱==的问题，代码的==可读性、维护性==差！</p>
<h3 id="2-什么是-API-Promise-化">2.什么是 API Promise 化</h3>
<p>==API Promise化==，指的是==通过额外的配置==，将官方提供的、基于回调函数的异步 API，==升级改造为基于 Promise 的异步 API==，从而提高代码的可读性、维护性，避免回调地狱的问题。</p>
<h3 id="3-实现-API-Promise-化">3.实现 API Promise 化</h3>
<p>在小程序中，实现 API Promise 化主要依赖于 ==miniprogram-api-promise== 这个第三方的 npm 包。它的安装和使用步骤如下：</p>
<blockquote>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;npm install <span class="comment">--save miniprogram-api-promise</span></span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">//在小程序入口文件中(app.js)，只需调用一次 promisifyAll() 方法</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">//即可实现异步 API 的 promise 化</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">import &#123;promisifyAll&#125; from <span class="string">&quot;miniprogram-api-promise&quot;</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">const wxp = wx.p = &#123;&#125;</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">//promisify all wx<span class="string">&#x27;s api</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash"><span class="string">promisifyAll(wx,wxp)</span></span></span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="4-调用-Promise-化之后的异步-API">4.调用 Promise 化之后的异步 API</h3>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">//页面 .wxml 结构</span></span><br><span class="line">&gt;<span class="language-xml"><span class="tag">&lt;<span class="name">van-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;getInfo&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&gt;<span class="comment">//在页面的 .js 文件中，定义对应的 tap 事件处理函数</span></span><br><span class="line">&gt;<span class="keyword">async</span> <span class="title function_">getInfo</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">const</span> &#123;<span class="attr">data</span>: res&#125; = <span class="keyword">await</span> wx.<span class="property">p</span>.<span class="title function_">request</span>(&#123;</span><br><span class="line"> <span class="attr">method</span>:<span class="string">&quot;GET&quot;</span>,</span><br><span class="line"> <span class="attr">url</span>:<span class="string">&quot;https://www.escook.cn/api/get&quot;</span>,</span><br><span class="line"> <span class="attr">data</span>:&#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="string">&quot;zhangsan&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>:<span class="number">20</span></span><br><span class="line"> &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">&gt;&#125;,</span><br></pre></td></tr></table></figure>
</blockquote>
<h1>全局数据共享</h1>
<h2 id="1-什么是全局数据共享">1.什么是全局数据共享</h2>
<p>==全局数据共享==（又叫做：状态管理）是为了解决==组件之间数据共享==的问题。<br>
开发中常用的全局数据共享方案有：Vuex、Redux、MobX 等。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://ngc1224.oss-cn-hangzhou.aliyuncs.com/TyporaImg/WeChat/image-20230404120612048.png" alt="image-20230404120612048"></p>
<h2 id="2-小程序中的全局数据共享方案">2.小程序中的全局数据共享方案</h2>
<p>在小程序中，可使用 ==mobx-miniprogram== 配合 ==mobx-miniprogram-bindings== 实现全局数据共享。其中：</p>
<ul>
<li>mobx-miniprogram 用来==创建 Store 实例对象==</li>
<li>mobx-miniprogram-bindings 用来==把 Store 中的共享数据或方法，绑定到组件或页面中使用==</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://ngc1224.oss-cn-hangzhou.aliyuncs.com/TyporaImg/WeChat/image-20230404120719684.png" alt="image-20230404120719684"></p>
<h2 id="3-MobX">3.MobX</h2>
<h3 id="1-安装-MobX-相关的包">1.安装 MobX 相关的包</h3>
<p>在项目中运行如下的命令，安装 MobX 相关的包：</p>
<blockquote>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;npm install <span class="comment">--save mobx-miniprogram mobx-miniprogram-bindings</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="2-创建-MobX-的-Store-实例">2.创建 MobX 的 Store 实例</h3>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">import</span> &#123; observable,action &#125; <span class="keyword">from</span> <span class="string">&quot;mobx-miniprogram&quot;</span></span><br><span class="line"></span><br><span class="line">&gt;<span class="keyword">export</span> <span class="keyword">const</span> store = <span class="title function_">observable</span>(&#123;</span><br><span class="line"><span class="comment">//数据字段</span></span><br><span class="line"><span class="attr">numA</span>:<span class="number">1</span>,</span><br><span class="line"><span class="attr">numB</span>:<span class="number">2</span>,</span><br><span class="line"><span class="comment">//计算属性</span></span><br><span class="line"><span class="keyword">get</span> <span class="title function_">sum</span>()&#123;</span><br><span class="line"> <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">numA</span> + <span class="variable language_">this</span>.<span class="property">numB</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//actions 方法，用来修改 store 中的数据</span></span><br><span class="line"><span class="attr">updateNum1</span>: <span class="title function_">action</span>(<span class="keyword">function</span> (<span class="params">step</span>)&#123;</span><br><span class="line"> <span class="variable language_">this</span>.<span class="property">numA</span> += step</span><br><span class="line">&#125;),</span><br><span class="line"><span class="attr">updateNum2</span>: <span class="title function_">action</span>(<span class="keyword">function</span> (<span class="params">step</span>)&#123;</span><br><span class="line"> <span class="variable language_">this</span>.<span class="property">numB</span> += step</span><br><span class="line">&#125;)</span><br><span class="line">&gt;&#125;)</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="3-将-Store-中的成员绑定到页面中">3.将 Store 中的成员绑定到页面中</h3>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">//页面的 .js 文件</span></span><br><span class="line">&gt;<span class="keyword">import</span> &#123; createStoreBindings &#125; <span class="keyword">from</span> <span class="string">&quot;mobx-miniprogram-bindings&quot;</span></span><br><span class="line">&gt;<span class="keyword">import</span> &#123; store &#125; <span class="keyword">from</span> <span class="string">&quot;../../store/store&quot;</span></span><br><span class="line"></span><br><span class="line">&gt;<span class="title class_">Page</span>(&#123;</span><br><span class="line"><span class="attr">onLoad</span>: <span class="keyword">function</span> (<span class="params">options</span>) &#123;<span class="comment">//生命周期函数--监听页面的加载</span></span><br><span class="line"> <span class="variable language_">this</span>.<span class="property">storeBindings</span> = <span class="title function_">createStoreBindings</span>(<span class="variable language_">this</span>,&#123;</span><br><span class="line">       store,<span class="comment">//要绑定的数据仓库</span></span><br><span class="line">       <span class="attr">fields</span>:[<span class="string">&quot;numA&quot;</span>,<span class="string">&quot;numB&quot;</span>,<span class="string">&quot;sum&quot;</span>],</span><br><span class="line">       <span class="attr">actions</span>:[<span class="string">&quot;updateNum1&quot;</span>]</span><br><span class="line">   &#125;)</span><br><span class="line"> &#125;,</span><br><span class="line">   <span class="attr">onUnload</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;<span class="comment">//生命周期函数--监听页面卸载</span></span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">storeBindings</span>.<span class="property">detroyStoreBindings</span></span><br><span class="line"> &#125;</span><br><span class="line">&gt;&#125;)</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="4-在页面上使用-Store-中的成员">4.在页面上使用 Store 中的成员</h3>
<blockquote>
<figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">&gt;//页面的 .wxml 结构</span></span><br><span class="line"><span class="language-xml">&gt;<span class="tag">&lt;<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"> </span><span class="template-variable">&#123;&#123;<span class="name">numA</span>&#125;&#125;</span><span class="language-xml"> + </span><span class="template-variable">&#123;&#123;<span class="name">numB</span>&#125;&#125;</span><span class="language-xml"> = </span><span class="template-variable">&#123;&#123;<span class="name">sum</span>&#125;&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">&gt;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">&gt;<span class="tag">&lt;<span class="name">van-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;btnHandler1&quot;</span> <span class="attr">data-step</span>=<span class="string">&quot;</span></span></span><span class="template-variable">&#123;&#123;<span class="name">1</span>&#125;&#125;</span><span class="language-xml"><span class="tag"><span class="string">&quot;</span>&gt;</span>numA + 1<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">&gt;<span class="tag">&lt;<span class="name">van-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;btnHandler1&quot;</span>  <span class="attr">data-step</span>=<span class="string">&quot;</span></span></span><span class="template-variable">&#123;&#123;<span class="name">-1</span>&#125;&#125;</span><span class="language-xml"><span class="tag"><span class="string">&quot;</span>&gt;</span>numA - 1<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">&gt;<span class="tag">&lt;<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">&gt;//按钮 tap 事件的处理函数</span></span><br><span class="line"><span class="language-xml">&gt;btnHandler1(e)&#123;</span></span><br><span class="line"><span class="language-xml">this.updateNum1(e.target.dataset.step)</span></span><br><span class="line"><span class="language-xml">&gt;&#125;,</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="5-将-Store-中的成员绑定到组件中">5.将 Store 中的成员绑定到组件中</h3>
<blockquote>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="title class_">import</span> <span class="punctuation">&#123;</span> storeBindingsBehavior <span class="punctuation">&#125;</span> from <span class="string">&quot;mobx-miniprogram-bindings&quot;</span></span><br><span class="line">&gt;<span class="title class_">import</span> <span class="punctuation">&#123;</span> store <span class="punctuation">&#125;</span> from <span class="string">&quot;../../store/store&quot;</span></span><br><span class="line"></span><br><span class="line">&gt;Component(<span class="punctuation">&#123;</span></span><br><span class="line"><span class="symbol">behaviors:</span>[storeBindingsBehavior],<span class="comment">//通过 storeBindingsBehavior 来实现自动绑定</span></span><br><span class="line"><span class="symbol"></span></span><br><span class="line"><span class="symbol">storeBindings:</span><span class="punctuation">&#123;</span></span><br><span class="line"> <span class="comment">//数据源</span></span><br><span class="line"> store,<span class="comment">//指定要绑定的 Store</span></span><br><span class="line"><span class="symbol"> fields:</span><span class="punctuation">&#123;</span><span class="comment">//指定要绑定的字段数据</span></span><br><span class="line"><span class="symbol"> numA:</span> () =&gt; store.numA,<span class="comment">//绑定字段的第 1 种方式</span></span><br><span class="line"><span class="symbol"> numB:</span> (store) =&gt; store.numB,<span class="comment">//绑定字段的第 2 种方式</span></span><br><span class="line"><span class="symbol"> sum:</span> <span class="string">&quot;sum&quot;</span><span class="comment">//绑定字段的第 3 种方式</span></span><br><span class="line"><span class="punctuation">&#125;</span>,</span><br><span class="line"><span class="symbol">actions:</span><span class="punctuation">&#123;</span><span class="comment">//指定要绑定的方法</span></span><br><span class="line"><span class="symbol">updateNum2:</span><span class="string">&quot;updateNum2&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span>,</span><br><span class="line">&gt;<span class="punctuation">&#125;</span>)</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="6-在组件中使用-Store-中的成员">6.在组件中使用 Store 中的成员</h3>
<blockquote>
<figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">&gt;//组件的 .wxml 结构</span></span><br><span class="line"><span class="language-xml">&gt;<span class="tag">&lt;<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"> </span><span class="template-variable">&#123;&#123;<span class="name">numA</span>&#125;&#125;</span><span class="language-xml"> + </span><span class="template-variable">&#123;&#123;<span class="name">numB</span>&#125;&#125;</span><span class="language-xml"> = </span><span class="template-variable">&#123;&#123;<span class="name">sum</span>&#125;&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">&gt;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">&gt;<span class="tag">&lt;<span class="name">van-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;btnHandler2&quot;</span> <span class="attr">data-step</span>=<span class="string">&quot;</span></span></span><span class="template-variable">&#123;&#123;<span class="name">1</span>&#125;&#125;</span><span class="language-xml"><span class="tag"><span class="string">&quot;</span>&gt;</span>numB + 1<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">&gt;<span class="tag">&lt;<span class="name">van-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;btnHandler2&quot;</span>  <span class="attr">data-step</span>=<span class="string">&quot;</span></span></span><span class="template-variable">&#123;&#123;<span class="name">-1</span>&#125;&#125;</span><span class="language-xml"><span class="tag"><span class="string">&quot;</span>&gt;</span>numB - 1<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">&gt;//组件的方法列表</span></span><br><span class="line"><span class="language-xml">&gt;methods: &#123;</span></span><br><span class="line"><span class="language-xml">btnHandler2(e)&#123;</span></span><br><span class="line"><span class="language-xml">this.updateNum2(e.target.dataset.step)</span></span><br><span class="line"><span class="language-xml">&#125;</span></span><br><span class="line"><span class="language-xml">&gt;&#125;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h1>分包</h1>
<h2 id="1-基础概念">1.基础概念</h2>
<h3 id="1-什么是分包">1.什么是分包</h3>
<p>分包指的是把一个==完整的小程序项目==，按照需求==划分为不同的子包==，在构建时打包成不同的分包，用户在使用时==按需进行加载==。</p>
<h3 id="2-分包的好处">2.分包的好处</h3>
<p>对小程序进行分包的好处主要有以下两点：</p>
<ul>
<li>可以==优化小程序首次启动的下载时间==</li>
<li>在==多团队共同开发==时可以更好的==解耦协作==</li>
</ul>
<h3 id="3-分包前项目的构成">3.分包前项目的构成</h3>
<p>分包前，小程序项目中==所有的页面==和==资源==都被打包到了一起，导致整个==项目体积过大==，影响小程序==首次启动的下载时间==。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://ngc1224.oss-cn-hangzhou.aliyuncs.com/TyporaImg/WeChat/image-20230404123250719.png" alt="image-20230404123250719"></p>
<h3 id="4-分包后项目的构成">4.分包后项目的构成</h3>
<p>分包后，小程序项目由 ==1 个主包== + ==多个分包==组成：</p>
<ul>
<li>主包：一般只包含项目的==启动页面==或 ==TabBar 页面==、以及所有分包都需要用到的一些==公共资源==</li>
<li>分包：只包含和当前分包有关的页面和私有资源</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://ngc1224.oss-cn-hangzhou.aliyuncs.com/TyporaImg/WeChat/image-20230404123809851.png" alt="image-20230404123809851"></p>
<h3 id="5-分包的加载规则">5.分包的加载规则</h3>
<ol>
<li>在小程序启动时，默认会==下载主包==并==启动主包内页面==</li>
</ol>
<ul>
<li>tabBar 页面需要放到主包中</li>
</ul>
<ol start="2">
<li>当用户进入分包内某个页面时，==客户端会把对应分包下载下来==，下载完成后再进行展示</li>
</ol>
<ul>
<li>非 tabBar 页面可以按照功能的不同，划分为不同的分包之后，进行按需下载</li>
</ul>
<h3 id="6-分包的体积限制">6.分包的体积限制</h3>
<p>目前，小程序分包的大小有以下两个限制：</p>
<ul>
<li>整个小程序所有分包大小不超过 ==16M==（主包 + 所有分包）</li>
<li>单个分包/主包大小不能超过 ==2M==</li>
</ul>
<h2 id="2-使用分包">2.使用分包</h2>
<h3 id="1-配置方法">1.配置方法</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://ngc1224.oss-cn-hangzhou.aliyuncs.com/TyporaImg/WeChat/image-20230404124556665.png" alt="image-20230404124556665"></p>
<p>在 app.json 的 subpackages 节点中声明分包的结构</p>
<blockquote>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&gt;&#123;</span><br><span class="line"> <span class="string">&quot;pages&quot;</span>: [<span class="comment">//主页的所有页面</span></span><br><span class="line">   <span class="string">&quot;pages/home/home&quot;</span>,</span><br><span class="line">   <span class="string">&quot;pages/message/message&quot;</span>,</span><br><span class="line">   <span class="string">&quot;pages/contact/contact&quot;</span></span><br><span class="line"> ],</span><br><span class="line"> <span class="string">&quot;subPackages&quot;</span>: [<span class="comment">//通过 subpackages 节点，声明分包的结构</span></span><br><span class="line">   &#123;</span><br><span class="line">     <span class="string">&quot;root&quot;</span>:<span class="string">&quot;pkgA&quot;</span>,<span class="comment">//第一个分包的根目录</span></span><br><span class="line">     <span class="string">&quot;name&quot;</span>: <span class="string">&quot;p1&quot;</span>,</span><br><span class="line">     <span class="string">&quot;pages&quot;</span>: [<span class="comment">//当下分包下，所有页面的相对存放路径</span></span><br><span class="line">       <span class="string">&quot;pages/cat/cat&quot;</span>,</span><br><span class="line">       <span class="string">&quot;pages/dog/dog&quot;</span></span><br><span class="line">     ]</span><br><span class="line">   &#125;,</span><br><span class="line">   &#123;</span><br><span class="line">     <span class="string">&quot;root&quot;</span>: <span class="string">&quot;pkgB&quot;</span>,<span class="comment">//第一个分包的根目录</span></span><br><span class="line">     <span class="string">&quot;name&quot;</span>: <span class="string">&quot;p2&quot;</span>,<span class="comment">//分包的别名</span></span><br><span class="line">     <span class="string">&quot;pages&quot;</span>: [<span class="comment">//当下分包下，所有页面的相对存放路径</span></span><br><span class="line">       <span class="string">&quot;pages/apple/apple&quot;</span></span><br><span class="line">     ],</span><br><span class="line">   &#125;</span><br><span class="line"> ]</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="2-打包原则">2.打包原则</h3>
<ol>
<li>小程序会按 ==subpackages== 的配置进行分包，subpackages 之外的目录将被打包到主包中</li>
<li>主包也可以有自己的 pages（即最外层的 pages 字段）</li>
<li>tabBar 页面必须在主包内</li>
<li>分包之间不能互相嵌套</li>
</ol>
<h3 id="3-引用原则">3.引用原则</h3>
<ol>
<li>主包==无法引用==分包内的私有资源</li>
<li>分包之间==不能相互引用==私有资源</li>
<li>分包==可以引用==主包内的公共资源</li>
</ol>
<h2 id="3-独立分包">3.独立分包</h2>
<h3 id="1-什么是独立分包">1.什么是独立分包</h3>
<p>独立分包==本质上也是分包==，只不过它比较特殊，==可以独立于主包和其他分包而单独运行==。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://ngc1224.oss-cn-hangzhou.aliyuncs.com/TyporaImg/WeChat/image-20230404125419949.png" alt="image-20230404125419949"></p>
<h3 id="2-独立分包和普通分包的区别">2.独立分包和普通分包的区别</h3>
<p>最主要的区别：==是否依赖于主包才能运行==</p>
<ul>
<li>普通分包必须依赖于主包才能运行</li>
<li>独立分包可以在不下载主包的情况下，独立运行</li>
</ul>
<h3 id="3-独立分包的应用场景">3.独立分包的应用场景</h3>
<p>开发者可以按需，将某些==具有一定功能独立性的页面==配置到==独立分包==中。原因如下：</p>
<ul>
<li>当小程序从普通的分包页面启动时，需要首先下载主包</li>
<li>而独立分包==不依赖主包==即可运行，==可以很大程度上提升分包页面的启动速度==</li>
</ul>
<p>注意：一个小程序中可以有多个独立分包。</p>
<h3 id="4-独立分包的配置方法">4.独立分包的配置方法</h3>
<p>通过 independent 声明独立分包</p>
<blockquote>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="string">&quot;subPackages&quot;</span>: [</span><br><span class="line">&gt;&#123;</span><br><span class="line">     <span class="string">&quot;root&quot;</span>: <span class="string">&quot;moduleB&quot;</span>,</span><br><span class="line">     <span class="string">&quot;name&quot;</span>: <span class="string">&quot;p2&quot;</span>,</span><br><span class="line">     <span class="string">&quot;pages&quot;</span>: [</span><br><span class="line">       <span class="string">&quot;pages/apple/apple&quot;</span></span><br><span class="line">     ],</span><br><span class="line">     <span class="string">&quot;independent&quot;</span>: <span class="literal">true</span><span class="comment">//通过此节点，声明当前 moudleB 分包为“独立分包”</span></span><br><span class="line">   &#125;</span><br><span class="line"> ]</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="5-引用原则">5.引用原则</h3>
<p>独立分包和普通分包以及主包之间，是==相互隔绝==的，==不能相互引用彼此的资源==！例如：</p>
<ol>
<li>主包==无法引用==独立分包内的私有资源</li>
<li>独立分包之间，==不能相互引用==私有资源</li>
<li>独立分包和普通分包之间，==不能相互引用==私有资源</li>
<li>==特别注意==：独立分包中不能引用主包内的公共资源</li>
</ol>
<h2 id="4-分包预下载">4.分包预下载</h2>
<h3 id="1-什么是分包预下载">1.什么是分包预下载</h3>
<p>分包预下载指的是：在进入小程序的某个页面时，==由框架自动预下载可能需要的分包==，从而提升进入后续分包页面时的启动速度。</p>
<h3 id="2-配置分包的预下载">2.配置分包的预下载</h3>
<p>==预下载分包的行为，会在进入指定的页面时触发==。在 app.json 中，使用 ==preloadRule== 节点定义分包的预下载规则，示例代码如下：</p>
<blockquote>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&gt;&#123;</span><br><span class="line"><span class="string">&quot;preloadRule&quot;</span>:&#123;<span class="comment">//分包预下载的规则</span></span><br><span class="line"> <span class="string">&quot;pages/contact/contact&quot;</span>:&#123;<span class="comment">//触发分包下载的页面路径</span></span><br><span class="line">  <span class="comment">//network 表示在指定的网络模式下进行预下载</span></span><br><span class="line">           <span class="comment">//可选值为：all（不限网络）和 wifi（仅 wifi 模式下进行预下载）</span></span><br><span class="line">           <span class="comment">//默认值为：wifi</span></span><br><span class="line">           <span class="string">&quot;network&quot;</span>:<span class="string">&quot;all&quot;</span>,</span><br><span class="line">           <span class="comment">//packages 表示进入页面后，预下载哪些分包</span></span><br><span class="line">           <span class="comment">//可以通过 root 或 name 指定下载哪些分包</span></span><br><span class="line">           <span class="string">&quot;packages&quot;</span>:<span class="selector-attr">[<span class="string">&quot;pkgA&quot;</span>]</span></span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="3-分包预下载的限制">3.分包预下载的限制</h3>
<p>同一个分包中的页面享有==共同的预下载大小限额 2M==</p>
</article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>小程序加强</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="https://blog.ngc1224.cn/posts/5b941666.html">https://blog.ngc1224.cn/posts/5b941666.html</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a"><h>作者</h><div class="post-copyright-cc-info"><h>NGC1224</h></div></div><div class="post-copyright-c"><h>发布于</h><div class="post-copyright-cc-info"><h>2024-03-15</h></div></div><div class="post-copyright-u"><h>更新于</h><div class="post-copyright-cc-info"><h>2024-03-15</h></div></div><div class="post-copyright-c"><h>许可协议</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%89%8D%E7%AB%AF/"><div class="tags-punctuation"><svg class="faa-tada icon" style="height:1.1em;width:1.1em;fill:currentColor;position:relative;top:2px;margin-right:3px" aria-hidden="true"><use xlink:href="#icon-sekuaibiaoqian"></use></svg></div>前端</a></div></div><link rel="stylesheet" href="/css/coin.css" media="defer" onload="this.media='all'"/><div class="post-reward"><button class="tip-button reward-button"><span class="tip-button__text">投喂作者</span><div class="coin-wrapper"><div class="coin"><div class="coin__middle"></div><div class="coin__back"></div><div class="coin__front"></div></div></div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="http://www.ngc1224.cn/webBackgroundImage/NGC11706621943128556.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://www.ngc1224.cn/webBackgroundImage/NGC11706621943128556.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="http://www.ngc1224.cn/webBackgroundImage/NGC11706621974135153.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://www.ngc1224.cn/webBackgroundImage/NGC11706621974135153.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></button></div><audio id="coinAudio" src="https://npm.elemecdn.com/akilar-candyassets@1.0.36/audio/aowu.m4a"></audio><script defer="defer" src="/js/coin.js"></script><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/a1bc99e2.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_14.webp" onerror="onerror=null;src='/assets/r2.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">模板与配置</div></div></a></div><div class="next-post pull-right"><a href="/posts/2f1c38e6.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_14.webp" onerror="onerror=null;src='/assets/r2.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Git代码版本控制工具</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/8fc29b6c.html" title="小程序介绍"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_14.webp" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2024-03-15</div><div class="title">小程序介绍</div></div></a></div><div><a href="/posts/a1bc99e2.html" title="模板与配置"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_14.webp" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2024-03-15</div><div class="title">模板与配置</div></div></a></div><div><a href="/posts/851324cd.html" title="页面导航"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_14.webp" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2024-03-15</div><div class="title">页面导航</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><svg class="meta_icon" style="width:22px;height:22px;position:relative;top:5px"><use xlink:href="#icon-mulu1"></use></svg><span style="font-weight:bold">目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">自定义组件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E7%BB%84%E4%BB%B6%E7%9A%84%E5%88%9B%E5%BB%BA%E4%B8%8E%E5%BC%95%E7%94%A8"><span class="toc-text">1.组件的创建与引用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA%E7%BB%84%E4%BB%B6"><span class="toc-text">1.创建组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%BC%95%E7%94%A8%E7%BB%84%E4%BB%B6"><span class="toc-text">2.引用组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%B1%80%E9%83%A8%E5%BC%95%E7%94%A8%E7%BB%84%E4%BB%B6"><span class="toc-text">3.局部引用组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%85%A8%E5%B1%80%E5%BC%95%E7%94%A8%E7%BB%84%E4%BB%B6"><span class="toc-text">4.全局引用组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%85%A8%E5%B1%80%E5%BC%95%E7%94%A8-VS-%E5%B1%80%E9%83%A8%E5%BC%95%E7%94%A8"><span class="toc-text">5.全局引用 VS 局部引用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E7%BB%84%E4%BB%B6%E5%92%8C%E9%A1%B5%E9%9D%A2%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">6.组件和页面的区别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%A0%B7%E5%BC%8F"><span class="toc-text">2.样式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%BB%84%E4%BB%B6%E6%A0%B7%E5%BC%8F%E9%9A%94%E7%A6%BB"><span class="toc-text">1.组件样式隔离</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%BB%84%E4%BB%B6%E6%A0%B7%E5%BC%8F%E9%9A%94%E7%A6%BB%E7%9A%84%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="toc-text">2.组件样式隔离的注意点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%BF%AE%E6%94%B9%E7%BB%84%E4%BB%B6%E7%9A%84%E6%A0%B7%E5%BC%8F%E9%9A%94%E7%A6%BB%E9%80%89%E9%A1%B9"><span class="toc-text">3.修改组件的样式隔离选项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-styleIsolation-%E7%9A%84%E5%8F%AF%E9%80%89%E5%80%BC"><span class="toc-text">4.styleIsolation 的可选值</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%95%B0%E6%8D%AE%E3%80%81%E6%96%B9%E6%B3%95%E5%92%8C%E5%B1%9E%E6%80%A7"><span class="toc-text">3.数据、方法和属性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-data-%E6%95%B0%E6%8D%AE"><span class="toc-text">1.data 数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-methods-%E6%96%B9%E6%B3%95"><span class="toc-text">2.methods 方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-properties-%E5%B1%9E%E6%80%A7"><span class="toc-text">3.properties 属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-data-%E5%92%8C-properties-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">4.data 和 properties 的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E4%BD%BF%E7%94%A8-setData-%E4%BF%AE%E6%94%B9-properties-%E7%9A%84%E5%80%BC"><span class="toc-text">5.使用 setData 修改 properties 的值</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%95%B0%E6%8D%AE%E7%9B%91%E5%90%AC"><span class="toc-text">4.数据监听</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AF%E6%95%B0%E6%8D%AE%E7%9B%91%E5%90%AC"><span class="toc-text">1.什么是数据监听</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%95%B0%E6%8D%AE%E7%9B%91%E5%90%AC%E5%99%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="toc-text">2.数据监听器的基本用法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%9B%91%E5%90%AC%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7%E7%9A%84%E5%8F%98%E5%8C%96"><span class="toc-text">3.监听对象属性的变化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E7%9B%91%E5%90%AC%E5%AF%B9%E8%B1%A1%E4%B8%AD%E6%8C%87%E5%AE%9A%E5%B1%9E%E6%80%A7%E7%9A%84%E5%8F%98%E5%8C%96"><span class="toc-text">4.监听对象中指定属性的变化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E7%9B%91%E5%90%AC%E5%AF%B9%E8%B1%A1%E4%B8%AD%E6%89%80%E6%9C%89%E5%B1%9E%E6%80%A7%E7%9A%84%E5%8F%98%E5%8C%96"><span class="toc-text">5.监听对象中所有属性的变化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E7%BA%AF%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5"><span class="toc-text">5.纯数据字段</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AF%E7%BA%AF%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5"><span class="toc-text">1.什么是纯数据字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%BD%BF%E7%94%A8%E8%A7%84%E5%88%99"><span class="toc-text">2.使用规则</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E7%BB%84%E4%BB%B6%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-text">6.组件的生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%BB%84%E4%BB%B6%E5%85%A8%E9%83%A8%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="toc-text">1.组件全部的生命周期函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%BB%84%E4%BB%B6%E4%B8%BB%E8%A6%81%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="toc-text">2.组件主要的生命周期函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-lifetimes-%E8%8A%82%E7%82%B9"><span class="toc-text">3.lifetimes 节点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E7%BB%84%E4%BB%B6%E6%89%80%E5%9C%A8%E9%A1%B5%E9%9D%A2%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-text">7.组件所在页面的生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AF%E7%BB%84%E4%BB%B6%E6%89%80%E5%9C%A8%E9%A1%B5%E9%9D%A2%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-text">1.什么是组件所在页面的生命周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-pageLifetimes-%E8%8A%82%E7%82%B9"><span class="toc-text">2.pageLifetimes 节点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E6%8F%92%E6%A7%BD"><span class="toc-text">8.插槽</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AF%E6%8F%92%E6%A7%BD"><span class="toc-text">1.什么是插槽</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%8D%95%E4%B8%AA%E6%8F%92%E6%A7%BD"><span class="toc-text">2.单个插槽</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%90%AF%E7%94%A8%E5%A4%9A%E4%B8%AA%E6%8F%92%E6%A7%BD"><span class="toc-text">3.启用多个插槽</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%AE%9A%E4%B9%89%E5%A4%9A%E4%B8%AA%E6%8F%92%E6%A7%BD"><span class="toc-text">4.定义多个插槽</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1"><span class="toc-text">9.父子组件之间的通信</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E9%80%9A%E4%BF%A1%E7%9A%84-3-%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-text">1.父子组件之间通信的 3 种方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%B1%9E%E6%80%A7%E7%BB%91%E5%AE%9A"><span class="toc-text">2.属性绑定</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A"><span class="toc-text">3.事件绑定</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E8%8E%B7%E5%8F%96%E7%BB%84%E4%BB%B6%E5%AE%9E%E4%BE%8B"><span class="toc-text">4.获取组件实例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-behaviors"><span class="toc-text">10.behaviors</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AF-behaviors"><span class="toc-text">1.什么是 behaviors</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-behaviors-%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%96%B9%E5%BC%8F"><span class="toc-text">2.behaviors 的工作方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%88%9B%E5%BB%BA-behavior"><span class="toc-text">3.创建 behavior</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%AF%BC%E5%85%A5%E5%B9%B6%E4%BD%BF%E7%94%A8-behavior"><span class="toc-text">4.导入并使用 behavior</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-behavior-%E4%B8%AD%E6%89%80%E6%9C%89%E5%8F%AF%E7%94%A8%E7%9A%84%E8%8A%82%E7%82%B9"><span class="toc-text">5.behavior 中所有可用的节点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%90%8C%E5%90%8D%E5%AD%97%E6%AE%B5%E7%9A%84%E8%A6%86%E7%9B%96%E5%92%8C%E7%BB%84%E5%90%88%E8%A7%84%E5%88%99"><span class="toc-text">6.同名字段的覆盖和组合规则</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">使用npm包</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AF%B9-npm-%E7%9A%84%E6%94%AF%E6%8C%81%E4%B8%8E%E9%99%90%E5%88%B6"><span class="toc-text">1.小程序对 npm 的支持与限制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Vant-Weapp"><span class="toc-text">2.Vant Weapp</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AF-Vant-Weapp"><span class="toc-text">1.什么是 Vant Weapp</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%AE%89%E8%A3%85-Vant-%E7%BB%84%E4%BB%B6%E5%BA%93"><span class="toc-text">2.安装 Vant 组件库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%BD%BF%E7%94%A8-Vant-%E7%BB%84%E4%BB%B6"><span class="toc-text">3.使用 Vant 组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%AE%9A%E5%88%B6%E5%85%A8%E5%B1%80%E4%B8%BB%E9%A2%98%E6%A0%B7%E5%BC%8F"><span class="toc-text">4.定制全局主题样式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%AE%9A%E5%88%B6%E5%85%A8%E5%B1%80%E4%B8%BB%E9%A2%98%E6%A0%B7%E5%BC%8F"><span class="toc-text">5.定制全局主题样式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-API-Promise%E5%8C%96"><span class="toc-text">3.API Promise化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%9F%BA%E4%BA%8E%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%E7%9A%84%E5%BC%82%E6%AD%A5-API-%E7%9A%84%E7%BC%BA%E7%82%B9"><span class="toc-text">1.基于回调函数的异步 API 的缺点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%BB%80%E4%B9%88%E6%98%AF-API-Promise-%E5%8C%96"><span class="toc-text">2.什么是 API Promise 化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%AE%9E%E7%8E%B0-API-Promise-%E5%8C%96"><span class="toc-text">3.实现 API Promise 化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E8%B0%83%E7%94%A8-Promise-%E5%8C%96%E4%B9%8B%E5%90%8E%E7%9A%84%E5%BC%82%E6%AD%A5-API"><span class="toc-text">4.调用 Promise 化之后的异步 API</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">全局数据共享</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AF%E5%85%A8%E5%B1%80%E6%95%B0%E6%8D%AE%E5%85%B1%E4%BA%AB"><span class="toc-text">1.什么是全局数据共享</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%B8%AD%E7%9A%84%E5%85%A8%E5%B1%80%E6%95%B0%E6%8D%AE%E5%85%B1%E4%BA%AB%E6%96%B9%E6%A1%88"><span class="toc-text">2.小程序中的全局数据共享方案</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-MobX"><span class="toc-text">3.MobX</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%AE%89%E8%A3%85-MobX-%E7%9B%B8%E5%85%B3%E7%9A%84%E5%8C%85"><span class="toc-text">1.安装 MobX 相关的包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%88%9B%E5%BB%BA-MobX-%E7%9A%84-Store-%E5%AE%9E%E4%BE%8B"><span class="toc-text">2.创建 MobX 的 Store 实例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%B0%86-Store-%E4%B8%AD%E7%9A%84%E6%88%90%E5%91%98%E7%BB%91%E5%AE%9A%E5%88%B0%E9%A1%B5%E9%9D%A2%E4%B8%AD"><span class="toc-text">3.将 Store 中的成员绑定到页面中</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%9C%A8%E9%A1%B5%E9%9D%A2%E4%B8%8A%E4%BD%BF%E7%94%A8-Store-%E4%B8%AD%E7%9A%84%E6%88%90%E5%91%98"><span class="toc-text">4.在页面上使用 Store 中的成员</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%B0%86-Store-%E4%B8%AD%E7%9A%84%E6%88%90%E5%91%98%E7%BB%91%E5%AE%9A%E5%88%B0%E7%BB%84%E4%BB%B6%E4%B8%AD"><span class="toc-text">5.将 Store 中的成员绑定到组件中</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%9C%A8%E7%BB%84%E4%BB%B6%E4%B8%AD%E4%BD%BF%E7%94%A8-Store-%E4%B8%AD%E7%9A%84%E6%88%90%E5%91%98"><span class="toc-text">6.在组件中使用 Store 中的成员</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">分包</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5"><span class="toc-text">1.基础概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AF%E5%88%86%E5%8C%85"><span class="toc-text">1.什么是分包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%88%86%E5%8C%85%E7%9A%84%E5%A5%BD%E5%A4%84"><span class="toc-text">2.分包的好处</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%88%86%E5%8C%85%E5%89%8D%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%9E%84%E6%88%90"><span class="toc-text">3.分包前项目的构成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%88%86%E5%8C%85%E5%90%8E%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%9E%84%E6%88%90"><span class="toc-text">4.分包后项目的构成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%88%86%E5%8C%85%E7%9A%84%E5%8A%A0%E8%BD%BD%E8%A7%84%E5%88%99"><span class="toc-text">5.分包的加载规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%88%86%E5%8C%85%E7%9A%84%E4%BD%93%E7%A7%AF%E9%99%90%E5%88%B6"><span class="toc-text">6.分包的体积限制</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E4%BD%BF%E7%94%A8%E5%88%86%E5%8C%85"><span class="toc-text">2.使用分包</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%85%8D%E7%BD%AE%E6%96%B9%E6%B3%95"><span class="toc-text">1.配置方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%89%93%E5%8C%85%E5%8E%9F%E5%88%99"><span class="toc-text">2.打包原则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%BC%95%E7%94%A8%E5%8E%9F%E5%88%99"><span class="toc-text">3.引用原则</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E7%8B%AC%E7%AB%8B%E5%88%86%E5%8C%85"><span class="toc-text">3.独立分包</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AF%E7%8B%AC%E7%AB%8B%E5%88%86%E5%8C%85"><span class="toc-text">1.什么是独立分包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%8B%AC%E7%AB%8B%E5%88%86%E5%8C%85%E5%92%8C%E6%99%AE%E9%80%9A%E5%88%86%E5%8C%85%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">2.独立分包和普通分包的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%8B%AC%E7%AB%8B%E5%88%86%E5%8C%85%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-text">3.独立分包的应用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E7%8B%AC%E7%AB%8B%E5%88%86%E5%8C%85%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%B9%E6%B3%95"><span class="toc-text">4.独立分包的配置方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%BC%95%E7%94%A8%E5%8E%9F%E5%88%99"><span class="toc-text">5.引用原则</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%88%86%E5%8C%85%E9%A2%84%E4%B8%8B%E8%BD%BD"><span class="toc-text">4.分包预下载</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AF%E5%88%86%E5%8C%85%E9%A2%84%E4%B8%8B%E8%BD%BD"><span class="toc-text">1.什么是分包预下载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%85%8D%E7%BD%AE%E5%88%86%E5%8C%85%E7%9A%84%E9%A2%84%E4%B8%8B%E8%BD%BD"><span class="toc-text">2.配置分包的预下载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%88%86%E5%8C%85%E9%A2%84%E4%B8%8B%E8%BD%BD%E7%9A%84%E9%99%90%E5%88%B6"><span class="toc-text">3.分包预下载的限制</span></a></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-color: transparent;"><div id="footer-wrap"><div id="ft"><div class="ft-item-1"><div class="t-top"><div class="t-t-l"><p class="ft-t t-l-t">格言🧬</p><div class="bg-ad"><div>再看看那个光点，它就在这里，这是家园，这是我们 —— 你所爱的每一个人，你认识的一个人，你听说过的每一个人，曾经有过的每一个人，都在它上面度过他们的一生✨</div><div class="btn-xz-box"><a class="btn-xz" target="_blank" rel="noopener" href="https://stellarium.org/">点击开启星辰之旅</a></div></div></div><div class="t-t-r"><p class="ft-t t-l-t">猜你想看💡</p><ul class="ft-links"><li><a href="/posts/eec9786.html">魔改指南</a><a href="/box/nav/">网址导航</a></li><li><a href="/social/link/">我的朋友</a><a href="/comments/">留点什么</a></li><li><a href="/personal/about/">关于作者</a><a href="/archives/">文章归档</a></li><li><a href="/categories/">文章分类</a><a href="/tags/">文章标签</a></li><li><a href="/box/Gallery/">我的画廊</a><a href="/personal/bb/">我的唠叨</a></li><li><a href="/site/time/">建设进程</a><a href="/site/census/">网站统计</a></li></ul></div></div></div><div class="ft-item-2"><p class="ft-t">推荐友链⌛</p><div class="ft-img-group"><div class="img-group-item"><a target="_blank" rel="noopener" href="https://www.fomal.cc/" title="Fomalhaut🥝"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/60e5d4e39da7c077.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="广告位招租"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="广告位招租"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="广告位招租"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="广告位招租"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="广告位招租"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="广告位招租"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="广告位招租"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div></div></div></div><div class="copyright"><span><b>&copy;2024</b></span><span><b>&nbsp;&nbsp;By NGC1224</b></span></div><div class="footer_custom_text"><a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/"><span>备案号：湘ICP备2023010837号-1</span></a></div><div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" title="博客框架为Hexo_v6.3.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Frame-Hexo-blue.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" title="主题版本Butterfly_v4.3.1"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Theme-Butterfly-6513df.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" title="本站采用多线部署，主线路托管于Vercel"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Hosted-Vercel-brightgreen.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://user.51.la/" style="margin-inline:5px" title="本站数据分析得益于51la技术支持"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Analytics-51la-3db1eb.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://icp.gov.moe/?keyword=20226665" style="margin-inline:5px" title="本站已加入萌ICP豪华套餐，萌ICP备20226665号"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/萌ICP备-20226665-fe1384.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://bitiful.dogecast.com/buckets" style="margin-inline:5px" title="本网站经Service Worker分流至缤纷云对象存储"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=" https://sourcebucket.s3.ladydaily.com/badge/Bucket-缤纷云-9c62da.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://www.netdun.net/" style="margin-inline:5px" title="本站使用网盾星球提供CDN加速与防护"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/CDN-网盾星球-fff2cc.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" title="本网站源码由Github提供存储仓库"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=" https://sourcebucket.s3.ladydaily.com/badge/Source-Github-d021d6.svg" alt=""/></a></p></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><a class="icon-V hidden" onclick="switchNightMode()" title="浅色和深色模式转换"><svg width="25" height="25" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon"></use></svg></a><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button><button class="share" type="button" title="右键模式" onclick="changeMouseMode()"><i class="fas fa-mouse"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog right_side"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button class="share" type="button" title="分享链接" onclick="share()"><i class="fas fa-share-nodes"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i><span id="percent">0<span>%</span></span></button><button id="go-down" type="button" title="直达底部" onclick="btf.scrollToDest(document.body.scrollHeight, 500)"><i class="fas fa-arrow-down"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div class="js-pjax" id="rightMenu"><div class="rightMenu-group rightMenu-small"><a class="rightMenu-item" href="javascript:window.history.back();"><i class="fa fa-arrow-left"></i></a><a class="rightMenu-item" href="javascript:window.history.forward();"><i class="fa fa-arrow-right"></i></a><a class="rightMenu-item" href="javascript:window.location.reload();"><i class="fa fa-refresh"></i></a><a class="rightMenu-item" href="javascript:rmf.scrollToTop();"><i class="fa fa-arrow-up"></i></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-text"><a class="rightMenu-item" href="javascript:rmf.copySelect();"><i class="fa fa-copy"></i><span>复制</span></a><a class="rightMenu-item" href="javascript:window.open(&quot;https://www.baidu.com/s?wd=&quot;+window.getSelection().toString());window.location.reload();"><i class="fa fa-search"></i><span>百度搜索</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-too"><a class="rightMenu-item" href="javascript:window.open(window.getSelection().toString());window.location.reload();"><i class="fa fa-link"></i><span>转到链接</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-paste"><a class="rightMenu-item" href="javascript:rmf.paste()"><i class="fa fa-copy"></i><span>粘贴</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-post"><a class="rightMenu-item" href="#post-comment"><i class="fas fa-comment"></i><span>空降评论</span></a><a class="rightMenu-item" href="javascript:rmf.copyWordsLink()"><i class="fa fa-link"></i><span>复制本文地址</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-to"><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>新窗口打开</span></a><a class="rightMenu-item" id="menu-too" href="javascript:rmf.open()"><i class="fa fa-link"></i><span>转到链接</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>复制链接</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-img"><a class="rightMenu-item" href="javascript:rmf.saveAs()"><i class="fa fa-download"></i><span>保存图片</span></a><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>在新窗口打开</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>复制图片链接</span></a></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item" href="javascript:randomPost()"><i class="fa fa-paper-plane"></i><span>随便逛逛</span></a><a class="rightMenu-item" href="javascript:switchNightMode();"><i class="fa fa-moon"></i><span>昼夜切换</span></a><a class="rightMenu-item" href="/personal/about/"><i class="fa fa-info-circle"></i><span>关于博客</span></a><a class="rightMenu-item" href="javascript:toggleWinbox();"><i class="fas fa-cog"></i><span>美化设置</span></a><a class="rightMenu-item" href="javascript:rmf.fullScreen();"><i class="fas fa-expand"></i><span>切换全屏</span></a><a class="rightMenu-item" href="javascript:window.print();"><i class="fa-solid fa-print"></i><span>打印页面</span></a></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.staticfile.org/fancyapps-ui/4.0.31/fancybox.umd.min.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/instant.page/5.1.0/instantpage.min.js" type="module"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/vanilla-lazyload/17.3.1/lazyload.iife.min.js"></script><script src="/js/search/local-search.js"></script><script async="async">var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())
setTimeout(function(){preloader.endLoading();}, 5000);
document.getElementById('loading-box').addEventListener('click',()=> {preloader.endLoading()})</script><div class="js-pjax"><script>(()=>{
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: '',
      region: '',
      onCommentLoaded: function () {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: '',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      countELement.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const runFn = () => {
    init()
    
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') {
      setTimeout(runFn,0)
      return
    } 
    getScript('https://cdn.staticfile.org/twikoo/1.6.8/twikoo.all.min.js').then(runFn)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script src="https://cdn.staticfile.org/jquery/3.6.3/jquery.min.js"></script><script async src="https://cdn1.tianli0.top/npm/vue@2.6.14/dist/vue.min.js"></script><script async src="https://cdn1.tianli0.top/npm/element-ui@2.15.6/lib/index.js"></script><script async src="https://cdn.bootcdn.net/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script><script defer type="text/javascript" src="https://cdn1.tianli0.top/npm/sweetalert2@8.19.0/dist/sweetalert2.all.js"></script><script async src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><script defer src="https://cdn1.tianli0.top/gh/nextapps-de/winbox/dist/winbox.bundle.min.js"></script><script async src="//at.alicdn.com/t/c/font_3586335_hsivh70x0fm.js"></script><script async src="//at.alicdn.com/t/c/font_3636804_gr02jmjr3y9.js"></script><script async src="//at.alicdn.com/t/c/font_3612150_kfv55xn3u2g.js"></script><script async src="https://cdn.wpon.cn/2022-sucai/Gold-ingot.js"></script><canvas id="universe"></canvas><canvas id="snow"></canvas><script defer src="/js/fomal.js"></script><script src="https://cdn.staticfile.org/jquery/3.6.3/jquery.min.js"></script><script async data-pjax src="https://cdn.wpon.cn/2022-sucai/Gold-ingot.js"></script><script async data-pjax src="/js/newYear.js"></script><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.js"></script><script src="https://cdn1.tianli0.top/npm/js-heo@1.0.12/metingjs/Meting.min.js"></script><script src="https://lib.baomitu.com/pjax/0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show","#web_bg",".js-pjax","#bibi","body > title","#app","#tag-echarts","#posts-echart","#categories-echarts"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --> <script data-pjax>if(document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    var parent = document.getElementById('recent-posts');
    var child = '<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><div class="magnet_item"><a class="magnet_link" href="https://blog.ngc1224.cn/categories/Python/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🍼 Python笔记 (4)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://blog.ngc1224.cn/categories/小程序/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">💻 小程序笔记 (4)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://blog.ngc1224.cn/categories/运维/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">📟 运维笔记 (2)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://blog.ngc1224.cn/categories/工具/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🔧 一些工具使用 (2)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item" style="visibility: hidden"></div><div class="magnet_item" style="visibility: hidden"></div><a class="magnet_link_more"  href="https://blog.ngc1224.cn/categories/" style="flex:1;text-align: center;margin-bottom: 10px;">查看更多...</a></div></div>';
    console.log('已挂载magnet')
    parent.insertAdjacentHTML("afterbegin",child)}
     </script><style>#catalog_magnet{flex-wrap: wrap;display: flex;width:100%;justify-content:space-between;padding: 10px 10px 0 10px;align-content: flex-start;}.magnet_item{flex-basis: calc(33.333333333333336% - 5px);background: #e9e9e9;margin-bottom: 10px;border-radius: 8px;transition: all 0.2s ease-in-out;}.magnet_item:hover{background: var(--text-bg-hover)}.magnet_link_more{color:#555}.magnet_link{color:black}.magnet_link:hover{color:white}@media screen and (max-width: 600px) {.magnet_item {flex-basis: 100%;}}.magnet_link_context{display:flex;padding: 10px;font-size:16px;transition: all 0.2s ease-in-out;}.magnet_link_context:hover{padding: 10px 20px;}</style>
    <style></style><script data-pjax>
    function butterfly_categories_card_injector_config(){
      var parent_div_git = document.getElementById('recent-posts');
      var item_html = '<style>li.categoryBar-list-item{width:32.3%;}.categoryBar-list{max-height: 190px;overflow:auto;}.categoryBar-list::-webkit-scrollbar{width:0!important}@media screen and (max-width: 650px){.categoryBar-list{max-height: 160px;}}</style><div class="recent-post-item" style="height:auto;width:100%;padding:0px;"><div id="categoryBar"><ul class="categoryBar-list"><li class="categoryBar-list-item" style="background:url(https://assets.akilar.top/image/cover1.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/Python/&quot;);" href="javascript:void(0);">Python</a><span class="categoryBar-list-count">4</span><span class="categoryBar-list-descr">算法</span></li><li class="categoryBar-list-item" style="background:url(https://assets.akilar.top/image/cover2.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/工具/&quot;);" href="javascript:void(0);">工具</a><span class="categoryBar-list-count">2</span><span class="categoryBar-list-descr">后端</span></li><li class="categoryBar-list-item" style="background:url(https://assets.akilar.top/image/cover3.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/运维/&quot;);" href="javascript:void(0);">运维</a><span class="categoryBar-list-count">2</span><span class="categoryBar-list-descr">前端</span></li><li class="categoryBar-list-item" style="background:url(https://assets.akilar.top/image/cover6.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/c语言/&quot;);" href="javascript:void(0);">c语言</a><span class="categoryBar-list-count">5</span><span class="categoryBar-list-descr">日常</span></li><li class="categoryBar-list-item" style="background:url(https://assets.akilar.top/image/cover6.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/小程序/&quot;);" href="javascript:void(0);">小程序</a><span class="categoryBar-list-count">4</span><span class="categoryBar-list-descr">运维</span></li></ul></div></div>';
      console.log('已挂载butterfly_categories_card')
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      }
    if( document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    butterfly_categories_card_injector_config()
    }
  </script><script data-pjax>
  function butterfly_clock_anzhiyu_injector_config(){
    var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
    var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>';
    console.log('已挂载butterfly_clock_anzhiyu')
    if(parent_div_git) {
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var qweather_key = '9c0db6650d164df2a48a88733ca37667';
  var gaud_map_key = 'c87191a0ce51fffd88d55b429792127b';
  var baidu_ak_key = 'undefined';
  var flag = 0;
  var clock_rectangle = '113.34532,23.15624';
  var clock_default_rectangle_enable = 'false';

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_clock_anzhiyu_injector_config();
  }
  else if (epage === cpage){
    butterfly_clock_anzhiyu_injector_config();
  }
  </script><script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script><script data-pjax src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.js"></script><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/2f1c38e6.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_14.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-03-05</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/2f1c38e6.html&quot;);" href="javascript:void(0);" alt="">Git代码版本控制工具</a><div class="blog-slider__text">了解Git基本概念</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/2f1c38e6.html&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/7fea3019.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_14.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-03-03</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/7fea3019.html&quot;);" href="javascript:void(0);" alt="">Python的安装</a><div class="blog-slider__text">本文主要是介绍python的下载与安装，主要针对python3.7版本</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/7fea3019.html&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/2013454d.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_14.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-08-09</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/2013454d.html&quot;);" href="javascript:void(0);" alt="">Markdown语法与外挂标签写法汇总</a><div class="blog-slider__text">🥧本文汇总Markdown格式以及外挂标签在网页端的渲染效果，可作为文档进行查询</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/2013454d.html&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><script data-pjax src="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.js"></script><script data-pjax>
  function gitcalendar_injector_config(){
      var parent_div_git = document.getElementById('gitZone');
      var item_html = '<div class="recent-post-item" id="gitcalendarBar" style="width:100%;height:auto;padding:10px;"><style>#git_container{min-height: 320px}@media screen and (max-width:650px) {#git_container{min-height: 0px}}</style><div id="git_loading" style="width:10%;height:100%;margin:0 auto;display: block;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animatetransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animatetransform></path></svg><style>#git_container{display: none;}</style></div><div id="git_container"></div></div>';
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      console.log('已挂载gitcalendar')
      }

    if( document.getElementById('gitZone') && (location.pathname ==='/site/census/'|| '/site/census/' ==='all')){
        gitcalendar_injector_config()
        GitCalendarInit("https://gitcalendar.ngc1224.cn/api?NGC1224",['#d9e0df', '#c6e0dc', '#a8dcd4', '#9adcd2', '#89ded1', '#77e0d0', '#5fdecb', '#47dcc6', '#39dcc3', '#1fdabe', '#00dab9'],'NGC1224')
    }
  </script><!-- hexo injector body_end end --></body></html>